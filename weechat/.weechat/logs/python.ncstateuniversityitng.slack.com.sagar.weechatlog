2018-03-25 19:37:07		getting channel history...
2018-02-26 17:26:57	jesse	come to the senior design room plz :slightly_smiling_face: 
2018-02-26 17:27:59	Sagar	Okay sure. I'll just grab my stuff and head there 
2018-02-26 17:52:26	Sagar	Where are you? 
2018-02-26 17:52:36	Sagar	This room is empty 
2018-02-26 17:52:56	jesse	are you in EB2? 
2018-02-26 17:53:04	Sagar	Yes 
2018-02-26 17:53:17	Sagar	In front of port city 
2018-02-26 17:53:24	Sagar	Student lounge 
2018-02-28 20:56:18	Sagar	Hey Jesse, Were you able to figure out the way to solve pubmed issue we were facing or is there something you are working on? 
2018-02-28 20:57:24	jesse	have you read what i've written on the rarediseases channel? 
2018-02-28 20:57:55	Sagar	Yeah I went through that 
2018-02-28 20:59:06	Sagar	It seems that we are stuck in this and I have to figure out what I need to work on 
2018-02-28 21:01:14	jesse	thats basically where I'm at. What dr. kowolenko actually asked for for this week was a few physicians that worked with our links... so I'm trying to just make psql statements that would show us physicians based on the name and medical school displayed in the pubmed data... I'm having trouble with this as well... 
2018-02-28 21:02:53	Sagar	Name is not completely entered in the DB. First name is abbreviated. Is this where you are facing problem? 
2018-02-28 21:03:03	jesse	no 
2018-02-28 21:03:10	jesse	we can do something like : 
2018-02-28 21:03:36	jesse	select * from physicians where last_name='SIMPSON' and first_name like 'J%' 
2018-02-28 21:03:51	jesse	where % is a wild card for the first name. 
2018-02-28 21:04:29	jesse	I'm going through this list of people who published papers in Chapel hill... but they do not seem to be physicians 
2018-02-28 21:05:11	Sagar	Okay got it. 
2018-02-28 21:05:11		They are mostly professor or researchers I guess.  (edited)
2018-02-28 21:08:47	jesse	yeah. guess so... still doesn't help cuz we are supposed to have more than just Michael Knowles 
2018-02-28 21:10:04	jesse	I'm getting some hits now that I fresh imported the data... I think I may have deleted entries. 
2018-02-28 21:10:40	Sagar	Yes I understand... is Michael Knowles is also a researcher just saw 
2018-02-28 21:11:21	Sagar	Distinguished Professor of Medicine 
2018-02-28 21:11:53	jesse	yeah. I think I'm getting some hits now. Is there a way to write python that executes these queries and prints the data somewhere? 
2018-02-28 21:12:33	Sagar	You mean executing psql? 
2018-02-28 21:13:18	Sagar	I think shell can be helpful but I don't think Python can do that in my knowledge 
2018-02-28 21:14:43	jesse	i'd prefer to generate a CSV of results rather than just things I would copy/paste into a terminal for the sake of showing Dr. Kowolenko that these links can be made 
2018-02-28 21:16:07	jesse	i guess that doesn't matter 
2018-02-28 21:22:17	Sagar	Yes right. That can be done later 
2018-02-28 21:24:09	Sagar	https://gis.stackexchange.com/questions/91443/how-to-execute-sql-lines-in-postgresql-using-python
2018-02-28 21:24:09		How to execute sql lines in postgresql using python?
2018-02-28 21:24:09		I use postgresql 8.4 to route a river network, the following is my code typed in pgAdmin and the result is fine, select * from driving_distance ('select gid as id, start_id::int4 as source, end_id:: 
2018-02-28 21:24:27	Sagar	Try this 
2018-02-28 21:29:18	jesse	thanks. I'm not gonna focus on that now. I'm kinda tired. The links definitely seem like they can happen so long as we figure out how to match the medical school names. all of my examples were chapel hill or virginia commonwealth 
2018-02-28 21:33:17	Sagar	Yes but we tried them and the search was treating it as Full Name 
2018-02-28 21:33:53	jesse	im not talkin about pubmed 
2018-02-28 21:34:27	Sagar	Oh okay 
2018-02-28 21:37:25	jesse	i gotcha. I wouldn't worry too much about anything tonight. i think we got everything we need for the week. 
2018-02-28 21:46:13	Sagar	Okay cool 
2018-02-28 21:46:27	Sagar	Good Night Dude :slightly_smiling_face: 
2018-02-28 21:58:05	jesse	good night 
2018-03-02 18:31:38	Sagar	Hey Jesse, you have given a decent amount of time so what would you like me to help you with? 
2018-03-02 18:47:24	jesse	yep. so the biggest thing is that we need some list of schools and universities to compare the two data sets. Either that, or if you have some function that could compare the names of the medical schools of pubmed to the medical schools on the physician data. Arun may have started workin on this but I havent gotten any word back from him 
2018-03-02 18:53:15	Sagar	Okay so what format are the names of medical schools of pubmed and physician data is? Is it csv? 
2018-03-02 18:53:41	Sagar	And what do you want from comparison? 
2018-03-02 18:54:40	jesse	I'll upload some stuff to the google drive. hold on. 
2018-03-02 18:54:56	Sagar	Okay 
2018-03-02 18:56:35	jesse	These files may be too big for google drive 
2018-03-02 18:58:10	jesse	2.5 gigabytes for just A-E.... I don't understand why the pubmed data is so big this time though though... 
2018-03-02 18:59:24	jesse	oh right.. I took out the NC filter 
2018-03-02 19:05:18	jesse	I'm in the process of uploading some of the pubmed data to google drive. It is certainly not all of it. I also pushed up what I did with the universities. 
2018-03-02 19:06:17	jesse	dont expect that to be representative of the whole data A-E. 
2018-03-02 19:07:27	jesse	but you can use it to help you. I also left up the pubmed data thats only NC 
2018-03-02 19:07:40	jesse	The authors are in a new table now btw 
2018-03-02 19:08:54	jesse	CSV i mean 
2018-03-02 19:15:06	Sagar	Can you please also upload the Physician data 
2018-03-02 19:15:59	Sagar	Let me try to compare the names of school of physicians and pub med 
2018-03-02 19:15:59	jesse	https://data.medicare.gov/Physician-Compare/Physician-Compare-National-Downloadable-File/mj5m-pzi6
2018-03-02 19:15:59		Physician Compare National Downloadable File | Data.Medicare.gov
2018-03-02 19:15:59		Physician Compare National Downloadable File - The Physician Compare National Downloadable File is organized at the individual eligible professional level; each line is unique at the professional/enrollment record/Group Practice/address level. Professionals with multiple Medicare enrollment records and/or single enrollments linking to multiple practice location addresses are listed on multiple lines. 
2018-03-02 19:16:11	Sagar	And which pub med data should I use 
2018-03-02 19:16:47	jesse	you can download it there. I dont want to upload it since I only have so much google drive space. 
2018-03-02 19:17:34	Sagar	Yes I got it :+1: 
2018-03-02 19:17:52	Sagar	Do you want me to download it with NC filter? 
2018-03-02 19:18:10	jesse	nope 
2018-03-02 19:18:19	Sagar	Okay 
2018-03-02 19:18:26	Sagar	And what about pub med 
2018-03-02 19:18:39	Sagar	Which data should I use to compare? 
2018-03-02 19:20:55	jesse	we dont have all of the data yet. we just need to compare the medical schools from pubmed that we have. it shouldnt matter which set you use. I recommend the one that says authors in the file name. thats gonna be the file type that Ill eventually hand over to you or someone else... 
2018-03-02 19:21:41	jesse	and these files are huge. I didnt upload the whole thing. 
2018-03-02 20:23:53	Sagar	Dude every time I am trying to run the script to compare medical schools in pub med and physician data my laptop hangs up 
2018-03-02 20:24:13	Sagar	I realized the physician data file is 760MB 
2018-03-02 20:27:34	jesse	yeah. these are monsters of files 
2018-03-02 20:28:02	jesse	but imagine how much better it would be than just nc. 
2018-03-02 20:29:41	jesse	Meaghan got me a VM that I'm running a script on. you could try asking her for one.
2018-03-02 20:29:41		but also keep efficiency in mind when writing your script. 
2018-03-02 20:32:45	Sagar	Yeah I was breaking my loop for 10000 entries even then it hasn't processed yet. The files are so big that just reading/processing them is taking the whole time 
2018-03-02 20:37:44	jesse	youll have to share the program with me. Ill see what I can do tomorrow or something. 
2018-03-02 20:38:09	Sagar	You said 'so the biggest thing is that we need some list of schools and universities to compare the two data sets', did you mean school names list or after comparison 
2018-03-02 20:38:13	Sagar	Yes sure 
2018-03-02 20:43:26	Sagar	@Sagar uploaded a file: https://ncstateuniversityitng.slack.com/files/U8S9YMBF0/F9JRANBB8/med_school_comparison.py (Med_School_Comparison.py) 
2018-03-02 20:44:00	Sagar	Thanks 
2018-03-02 21:36:09	jesse	i hope you understand that checking if the substring is in the pubmed affiliations is not enough. You are going to get very few hits since the university data is not uniform. N-Gram analysis is one way to try to accomplish this goal. But that is where the problem of efficiency arises. 
2018-03-02 21:36:09		Ideally, we need a list of searchable terms that are unique to each university/medical school. Imagine being able to search the affiliations for 'Chapel Hill' and then searching for all of the physicians whose med school was 'Chapel Hill'. That would be easier than trying every combination of 'University of North Carolina at Chapel Hill School of Medicine' and comparing that to the combinations of other data in the physicians table.
2018-03-02 21:36:09		lets call the N-Gram Method, Method 1.
2018-03-02 21:36:09		and lets call the unique search term method, Method 2.
2018-03-02 21:36:09		If we go with Method 1, and got that working, we could match the entirety of the pubmed data with every university in the united states... so long as the med school field of the physicians includes the universities (i'm looking into this now)
2018-03-02 21:36:09		Now for method 2. With method 2, we need to manually figure out which terms to search to match each individual school. (which is reasonable for the 150 Official medical schools. but not for 990 entries ) and I already kinda did something like that. We would probably get fewer hits, but seems much more feasible. 
2018-03-02 21:39:53	jesse	your script is a good starter file though. 
2018-03-02 22:31:25	jesse	I took a lil bit of time to compile "YetAnotherListOfMedSchools" in the drive. this is the list of med schools obtained through filtering out duplicates in the physician data. there are around 440 entries.... which is greater than the 150 and less than the 990 of the other lists. 
2018-03-02 22:31:25		im goin to bed. gnight dude 
2018-03-03 16:20:19	Sagar	I didn't thought about the ngram stuff. You are right. I was trying to figure out if there is a better way but I don't think so 
2018-03-03 16:20:39	Sagar	I was making the names shorter in the yet another list file 
2018-03-03 16:20:55	Sagar	But do you think it's a good idea to go with that 
2018-03-03 16:21:28	Sagar	Because there are names that are left with nothing in the end 
2018-03-03 17:33:48	Sagar	I have made another column in that yet another file 'ABB_NAME' containing abbreviated version of names 
2018-03-03 17:34:32	Sagar	I don't know how it will be helpful 
2018-03-03 19:25:59	jesse	we need the list of medical schools for the pubmed articles so we can compare manually to see if there are any patterns. 
2018-03-03 19:46:59	Sagar	What I have created is of any help? 
2018-03-03 19:47:53	Sagar	One thing dude, I won't be able to work now until Thursday as I am going Silicon Valley for the break! 
2018-03-03 19:48:20	jesse	neat!! what are ya going there for? 
2018-03-03 19:51:05	jesse	And I haven't looked at the abbreviations you made yet. I'm currently looking at generating the list of pubmed med schools 
2018-03-03 19:54:51	Sagar	I am going with the University. The Entrepreneurship at NC State selects 14 students every year for that. We will be having trips to companies and learn more about the tech and business 
2018-03-03 19:56:08	Sagar	Okay I am dealing with packing and stuff now lol. I have to reach airport by 4:30am! 
2018-03-03 19:57:51	jesse	thats pretty cool. I think I'd rather hang with my family to be honest lol. But that does sound interesting. 
2018-03-03 19:59:44	Sagar	That's great dude. I am looking forward to this, let's see what I gain from it. 
2018-03-09 17:27:34	Sagar	Hey Jesse,
2018-03-09 17:27:34		How's it going? 
2018-03-09 17:28:29	Sagar	How was the meeting yesterday? 
2018-03-09 17:43:22	jesse	Hey Sagar, its going alright. there was no meeting yesterday. how was your trip? 
2018-03-09 18:14:54	Sagar	Cool! There was a meeting to showcase to orphanet people yesterday, I was just wondering what happened in that. It was good man, I got to see the environment in the silicon valley and met some really cool people. Listen to success stories of some NC State alumns and take some inspirational lessons 
2018-03-09 18:15:37	Sagar	What are the requirements now that we have to work on and what have been accomplished so far? 
2018-03-09 18:35:55	jesse	So, this week, I ran into quite a few issues but the important thing is that I made a script to take all of the pubmed stuff and compare the last names and the medical schools. The comparison is just stripping out some common words and checking if there is a direct match. There was a huge issue with using a nested for loop with the data. With as many articles and specialists there are, it would take an estimated 600 days to finish. So I started on a different approach. I 
2018-03-09 18:36:19	jesse	I plan on making separate sql statements for each state and doing comparisons per each state 
2018-03-09 18:36:50	jesse	I did it with NC med schools and got around 642 matches... which is pretty low I think, but we can ngram it later. 
2018-03-09 18:37:12	jesse	My new script takes about 30mins for just NC. 
2018-03-09 18:38:17	jesse	I also modified my scripts to only work with SQL... if we did CSV's, we would run into all the memory issues I had this week. 
2018-03-09 18:39:51	jesse	As for where we need to go, I need the states (2 letters) that each of the 404 med schools within YetAnotherMedSchoolList. I imagine this will take some manual work.
2018-03-09 18:39:51		I will also need to generate the sql statements based on the states and the med schools. 
2018-03-09 18:40:13	jesse	I talked to arun about this as well, but idk if he is trying to do this. 
2018-03-09 18:40:50	jesse	Anyway, I hit 20 hours for the week so I'm gonna stop messaging and working for the night. 
2018-03-09 18:42:39	Sagar	Okay I'll start doing that manual work now 
2018-03-09 18:43:00	jesse	Sweet! 
2018-03-09 18:44:19	Sagar	642 is low number for med school in NC, we have to find some other way around 
2018-03-09 18:44:56	Sagar	I was afraid of nested loop earlier too 
2018-03-09 18:46:47	Sagar	We can work on generating SQL statements. I will not disturb you anymore 
2018-03-09 18:47:09	Sagar	Thanks! 
2018-03-09 18:47:33	jesse	youre fine. if you want, I can push the script so you can take a look. 
2018-03-09 18:48:09	Sagar	Yes sure. Once I'm done with manual work, I'll try that 
2018-03-09 18:48:24	Sagar	Thanks dude 
2018-03-09 18:50:51	jesse	Its already pushed on rarediseases under scripts/pubmed_crawler/getPhysicianPubmedConnection.py 
2018-03-09 18:51:30	jesse	there is also compareMedSchools.py which helps ya test which hospitals are matching and not matching. 
2018-03-09 18:51:36	jesse	also pushed 
2018-03-09 18:51:54	Sagar	Awesome! Thanks 
2018-03-11 19:37:02	Sagar	Hey Jesse, I have uploaded the file named Medschoolswithstate in the drive 
2018-03-11 19:37:40	Sagar	There are only 6 schools whose name was too general and I can't be sure which ones are they 
2018-03-11 21:08:19	jesse	cool! 
2018-03-13 13:55:53	jesse	dont worry about the monstrous code we wrote, we found a much easier way. 
2018-03-13 14:42:06	Sagar	That's cool. What did you do now? 
2018-03-13 17:21:38	jesse	Same concept, we just SQL queried each last name and compared the two groups. We also created indexes so that the query runs MEGA FASTER. 
2018-03-13 17:21:55	jesse	about 5 lines of code compared to our monstrosity 
2018-03-13 19:51:46	Sagar	That is not completely clear to me but sounds similar but using SQL instead of loading whole data that we did 
2018-03-13 19:52:45	jesse	we just said select * from specialists where lastname=[iteratedVariable] 
2018-03-13 19:52:55	jesse	thats how we got the dataframes 
2018-03-13 19:53:45	Sagar	Hmm cool! 
2018-03-13 19:54:16	Sagar	That solves memory issue too 
2018-03-13 19:54:18	Sagar	Nice 
2018-03-13 19:55:11	jesse	of course, we wouldnt have been able to do that above statement without knowledge of indexes in databases.
2018-03-13 19:55:11		making them speeds up the query super fast. 
2018-03-13 19:55:33	jesse	it would have made our code take 150 days without the indexes 
2018-03-13 19:55:45	jesse	with it, only 4.5 hours 
2018-03-13 19:55:56	Sagar	I need to understand that from you. How you handled indexes 
2018-03-13 19:56:06	Sagar	Wow! That's so efficient 
2018-03-13 19:56:56	jesse	in psql, we just created an index of what we were going to query. you can google that but it has no python code. just one line of psql 
2018-03-13 19:57:29	Sagar	Cool, I'll look at it. Thanks! 
2018-03-13 19:57:43	Sagar	What we have to do now? 
2018-03-13 20:03:02	jesse	wait for meaghan to do a thing and then run the program on power6a... with her permission of course.
2018-03-13 20:03:02		in the mean time, we need a smarter comparisons. Michael wants us to compare first names as well as last, which is easy to implement since I already captured those variables. The first name of the pubmed data includes some middle names, so just split the first name on spaces and get the first value.
2018-03-13 20:03:02		^Once that is done,(and you can handle it if youd like.) we also probably need to figure out the ngrams of the medical school names to see if they are the same or not.
2018-03-13 20:03:02		theres also one more place that the data could get smarter, and that refers to MeSH terms. I can talk about that with you later... Michael and I arent quite sure how to approach that one. 
2018-03-13 20:03:45	jesse	I wonder if first names includes some values that are just initials.... 
2018-03-13 20:03:57	jesse	we'll need to check if thats the case 
2018-03-13 20:17:29	Sagar	Is it possible to use your regex magic to separate first names? In pubmed data the first names are very non uniform and they can be just initials of first and middle name or first full name and middle initial or both full...
2018-03-13 20:17:29		I have made a column for abbreviated names of medical schools but I don't think it will be useful. 
2018-03-13 20:17:29		I tried to look into Mesh thing but again for that we need to have a comprehensive Mesh data that Michael was talking about to compare. 
2018-03-13 20:19:35	jesse	first_name.split(' ') returns a list of words separated by spaces. the first element of the list is the first name.
2018-03-13 20:19:35		if len(first_name) == 1:   
2018-03-13 20:19:35		       compare only the first initial. 
2018-03-13 20:20:23	jesse	thats how I would do it... rather than regex.. 
2018-03-13 20:29:56	Sagar	Right, but I meant how would you handle non uniformity 
2018-03-13 20:30:09	Sagar	That's the reason we were just doing last names 
2018-03-13 20:30:20	jesse	could you give me an example of the nonuniformity? 
2018-03-13 20:31:03	Sagar	In pubmed data the first names are very non uniform and they can be just initials of first and middle name or first full name and middle initial or both full... 
2018-03-13 20:31:10	jesse	to my knowledge it is only
2018-03-13 20:31:10		Firstname Middleinitial
2018-03-13 20:31:10		OR
2018-03-13 20:31:10		firstinitial middleinitail 
2018-03-13 20:31:21	jesse	or first name 
2018-03-13 20:31:28	Sagar	Right 
2018-03-13 20:32:30	Sagar	So just taking the first character of first name in both pubmed and specialist and last name should be same. Will that work? 
2018-03-13 20:32:42	Sagar	I think it should, what's your say 
2018-03-13 20:33:02	jesse	if the length is greater than one, we could just compare the whole name couldnt we? 
2018-03-13 20:33:11	Sagar	We did not even have to perform split. 
2018-03-13 20:33:36	Sagar	Right but if it's greater than one it can have middle name as well 
2018-03-13 20:33:48	Sagar	Then we have to do split 
2018-03-13 20:33:58	jesse	whats wrong with doing split? 
2018-03-13 20:34:40	Sagar	Nothing wrong I was just suggesting a simpler way with one less operation 
2018-03-13 20:35:09	jesse	yeah. I think it would be better if we included the full first name if we can. 
2018-03-13 20:35:37	Sagar	Yes true it will be more accurate than just first character 
2018-03-13 20:36:28	jesse	start with the split, then see if the first item has a length greater than 1, and if it does, compare the first item with the specialist first name.. else compare the first letters of each first name. 
2018-03-13 20:37:07	Sagar	Right 
2018-03-13 20:37:53	jesse	are you gonna put in that code? or should i? I'm not looking at this stuff right now. 
2018-03-13 20:38:37	Sagar	I'm doing other thing now but will try to code that late night 
2018-03-13 20:38:46	jesse	ok 
2018-03-13 20:39:01	Sagar	Have you pushed the new code? 
2018-03-13 20:39:13	Sagar	I'll make changes in that only 
2018-03-13 20:39:42	jesse	yeah its pushed 
2018-03-13 20:40:18	Sagar	Cool getphysicianpubmedconnection? 
2018-03-13 20:44:50	jesse	yea 
2018-03-13 20:47:15	Sagar	Cool thanks! 
2018-03-14 10:03:48	jesse	did you add the piece of code? Michael and Meaghan are asking me to run it. 
2018-03-14 10:08:13	jesse	I just wrote it  up. didn't test though 
2018-03-14 14:59:37	Sagar	Did you ran the program? 
2018-03-14 15:00:11	jesse	yeah. i haven't tested it much but it only found 8 connections in 500 last names... 
2018-03-14 15:01:19	Sagar	That's low though 
2018-03-14 15:02:05	jesse	if ya want, you can work on it, and be sure its doing what its supposed to.
2018-03-14 15:02:05		im busy though, so I cant. 
2018-03-14 15:03:18	Sagar	Alright, not sure if I can but will try 
2018-03-14 15:05:04	jesse	i just pushed it. 
2018-03-14 15:23:30	Sagar	Cool 
2018-03-25 19:28:11	Sagar	Hey Jesse, I need your help in running a script on pubmed-jesse vm. Will you please run that? I have pushed it on the repo you can pull it from there 
2018-03-25 19:28:28	jesse	whats it for? 
2018-03-25 19:29:03	Sagar	For Hospitals database 
2018-03-25 19:29:17	Sagar	csv to django 
2018-03-25 19:29:50	Sagar	It's located here: rarediseases/scripts/hospitals/hospital_csv_to_django.py 
2018-03-25 19:30:04	Sagar	And there is a csv file in proxy server 
2018-03-25 19:30:30	Sagar	Hospital_General_Information.csv 
2018-03-25 19:30:49	Sagar	I think I have to send it to you, it will be on my proxy server 
2018-03-25 19:33:02	Sagar	@Sagar uploaded a file: https://ncstateuniversityitng.slack.com/files/U8S9YMBF0/F9V8MP97B/hospital_general_information.csv (Hospital_General_Information.csv) 
2018-03-25 19:33:08	jesse	why not just do this on your own machine? i assume the csv isnt big. 
2018-03-25 19:33:50	Sagar	My machine slows down when I run the project scripts 
2018-03-25 19:34:52	Sagar	I'm also having trouble running it on my vm environment 
2018-03-25 19:35:03	jesse	ok 
2018-03-25 19:35:16	Sagar	Thanks dude! 
2018-03-25 19:37:34		getting channel history...
2018-02-26 17:26:57	jesse	come to the senior design room plz :slightly_smiling_face: 
2018-02-26 17:27:59	Sagar	Okay sure. I'll just grab my stuff and head there 
2018-02-26 17:52:26	Sagar	Where are you? 
2018-02-26 17:52:36	Sagar	This room is empty 
2018-02-26 17:52:56	jesse	are you in EB2? 
2018-02-26 17:53:04	Sagar	Yes 
2018-02-26 17:53:17	Sagar	In front of port city 
2018-02-26 17:53:24	Sagar	Student lounge 
2018-02-28 20:56:18	Sagar	Hey Jesse, Were you able to figure out the way to solve pubmed issue we were facing or is there something you are working on? 
2018-02-28 20:57:24	jesse	have you read what i've written on the rarediseases channel? 
2018-02-28 20:57:55	Sagar	Yeah I went through that 
2018-02-28 20:59:06	Sagar	It seems that we are stuck in this and I have to figure out what I need to work on 
2018-02-28 21:01:14	jesse	thats basically where I'm at. What dr. kowolenko actually asked for for this week was a few physicians that worked with our links... so I'm trying to just make psql statements that would show us physicians based on the name and medical school displayed in the pubmed data... I'm having trouble with this as well... 
2018-02-28 21:02:53	Sagar	Name is not completely entered in the DB. First name is abbreviated. Is this where you are facing problem? 
2018-02-28 21:03:03	jesse	no 
2018-02-28 21:03:10	jesse	we can do something like : 
2018-02-28 21:03:36	jesse	select * from physicians where last_name='SIMPSON' and first_name like 'J%' 
2018-02-28 21:03:51	jesse	where % is a wild card for the first name. 
2018-02-28 21:04:29	jesse	I'm going through this list of people who published papers in Chapel hill... but they do not seem to be physicians 
2018-02-28 21:05:11	Sagar	Okay got it. 
2018-02-28 21:05:11		They are mostly professor or researchers I guess.  (edited)
2018-02-28 21:08:47	jesse	yeah. guess so... still doesn't help cuz we are supposed to have more than just Michael Knowles 
2018-02-28 21:10:04	jesse	I'm getting some hits now that I fresh imported the data... I think I may have deleted entries. 
2018-02-28 21:10:40	Sagar	Yes I understand... is Michael Knowles is also a researcher just saw 
2018-02-28 21:11:21	Sagar	Distinguished Professor of Medicine 
2018-02-28 21:11:53	jesse	yeah. I think I'm getting some hits now. Is there a way to write python that executes these queries and prints the data somewhere? 
2018-02-28 21:12:33	Sagar	You mean executing psql? 
2018-02-28 21:13:18	Sagar	I think shell can be helpful but I don't think Python can do that in my knowledge 
2018-02-28 21:14:43	jesse	i'd prefer to generate a CSV of results rather than just things I would copy/paste into a terminal for the sake of showing Dr. Kowolenko that these links can be made 
2018-02-28 21:16:07	jesse	i guess that doesn't matter 
2018-02-28 21:22:17	Sagar	Yes right. That can be done later 
2018-02-28 21:24:09	Sagar	https://gis.stackexchange.com/questions/91443/how-to-execute-sql-lines-in-postgresql-using-python
2018-02-28 21:24:09		How to execute sql lines in postgresql using python?
2018-02-28 21:24:09		I use postgresql 8.4 to route a river network, the following is my code typed in pgAdmin and the result is fine, select * from driving_distance ('select gid as id, start_id::int4 as source, end_id:: 
2018-02-28 21:24:27	Sagar	Try this 
2018-02-28 21:29:18	jesse	thanks. I'm not gonna focus on that now. I'm kinda tired. The links definitely seem like they can happen so long as we figure out how to match the medical school names. all of my examples were chapel hill or virginia commonwealth 
2018-02-28 21:33:17	Sagar	Yes but we tried them and the search was treating it as Full Name 
2018-02-28 21:33:53	jesse	im not talkin about pubmed 
2018-02-28 21:34:27	Sagar	Oh okay 
2018-02-28 21:37:25	jesse	i gotcha. I wouldn't worry too much about anything tonight. i think we got everything we need for the week. 
2018-02-28 21:46:13	Sagar	Okay cool 
2018-02-28 21:46:27	Sagar	Good Night Dude :slightly_smiling_face: 
2018-02-28 21:58:05	jesse	good night 
2018-03-02 18:31:38	Sagar	Hey Jesse, you have given a decent amount of time so what would you like me to help you with? 
2018-03-02 18:47:24	jesse	yep. so the biggest thing is that we need some list of schools and universities to compare the two data sets. Either that, or if you have some function that could compare the names of the medical schools of pubmed to the medical schools on the physician data. Arun may have started workin on this but I havent gotten any word back from him 
2018-03-02 18:53:15	Sagar	Okay so what format are the names of medical schools of pubmed and physician data is? Is it csv? 
2018-03-02 18:53:41	Sagar	And what do you want from comparison? 
2018-03-02 18:54:40	jesse	I'll upload some stuff to the google drive. hold on. 
2018-03-02 18:54:56	Sagar	Okay 
2018-03-02 18:56:35	jesse	These files may be too big for google drive 
2018-03-02 18:58:10	jesse	2.5 gigabytes for just A-E.... I don't understand why the pubmed data is so big this time though though... 
2018-03-02 18:59:24	jesse	oh right.. I took out the NC filter 
2018-03-02 19:05:18	jesse	I'm in the process of uploading some of the pubmed data to google drive. It is certainly not all of it. I also pushed up what I did with the universities. 
2018-03-02 19:06:17	jesse	dont expect that to be representative of the whole data A-E. 
2018-03-02 19:07:27	jesse	but you can use it to help you. I also left up the pubmed data thats only NC 
2018-03-02 19:07:40	jesse	The authors are in a new table now btw 
2018-03-02 19:08:54	jesse	CSV i mean 
2018-03-02 19:15:06	Sagar	Can you please also upload the Physician data 
2018-03-02 19:15:59	Sagar	Let me try to compare the names of school of physicians and pub med 
2018-03-02 19:15:59	jesse	https://data.medicare.gov/Physician-Compare/Physician-Compare-National-Downloadable-File/mj5m-pzi6
2018-03-02 19:15:59		Physician Compare National Downloadable File | Data.Medicare.gov
2018-03-02 19:15:59		Physician Compare National Downloadable File - The Physician Compare National Downloadable File is organized at the individual eligible professional level; each line is unique at the professional/enrollment record/Group Practice/address level. Professionals with multiple Medicare enrollment records and/or single enrollments linking to multiple practice location addresses are listed on multiple lines. 
2018-03-02 19:16:11	Sagar	And which pub med data should I use 
2018-03-02 19:16:47	jesse	you can download it there. I dont want to upload it since I only have so much google drive space. 
2018-03-02 19:17:34	Sagar	Yes I got it :+1: 
2018-03-02 19:17:52	Sagar	Do you want me to download it with NC filter? 
2018-03-02 19:18:10	jesse	nope 
2018-03-02 19:18:19	Sagar	Okay 
2018-03-02 19:18:26	Sagar	And what about pub med 
2018-03-02 19:18:39	Sagar	Which data should I use to compare? 
2018-03-02 19:20:55	jesse	we dont have all of the data yet. we just need to compare the medical schools from pubmed that we have. it shouldnt matter which set you use. I recommend the one that says authors in the file name. thats gonna be the file type that Ill eventually hand over to you or someone else... 
2018-03-02 19:21:41	jesse	and these files are huge. I didnt upload the whole thing. 
2018-03-02 20:23:53	Sagar	Dude every time I am trying to run the script to compare medical schools in pub med and physician data my laptop hangs up 
2018-03-02 20:24:13	Sagar	I realized the physician data file is 760MB 
2018-03-02 20:27:34	jesse	yeah. these are monsters of files 
2018-03-02 20:28:02	jesse	but imagine how much better it would be than just nc. 
2018-03-02 20:29:41	jesse	Meaghan got me a VM that I'm running a script on. you could try asking her for one.
2018-03-02 20:29:41		but also keep efficiency in mind when writing your script. 
2018-03-02 20:32:45	Sagar	Yeah I was breaking my loop for 10000 entries even then it hasn't processed yet. The files are so big that just reading/processing them is taking the whole time 
2018-03-02 20:37:44	jesse	youll have to share the program with me. Ill see what I can do tomorrow or something. 
2018-03-02 20:38:09	Sagar	You said 'so the biggest thing is that we need some list of schools and universities to compare the two data sets', did you mean school names list or after comparison 
2018-03-02 20:38:13	Sagar	Yes sure 
2018-03-02 20:43:26	Sagar	@Sagar uploaded a file: https://ncstateuniversityitng.slack.com/files/U8S9YMBF0/F9JRANBB8/med_school_comparison.py (Med_School_Comparison.py) 
2018-03-02 20:44:00	Sagar	Thanks 
2018-03-02 21:36:09	jesse	i hope you understand that checking if the substring is in the pubmed affiliations is not enough. You are going to get very few hits since the university data is not uniform. N-Gram analysis is one way to try to accomplish this goal. But that is where the problem of efficiency arises. 
2018-03-02 21:36:09		Ideally, we need a list of searchable terms that are unique to each university/medical school. Imagine being able to search the affiliations for 'Chapel Hill' and then searching for all of the physicians whose med school was 'Chapel Hill'. That would be easier than trying every combination of 'University of North Carolina at Chapel Hill School of Medicine' and comparing that to the combinations of other data in the physicians table.
2018-03-02 21:36:09		lets call the N-Gram Method, Method 1.
2018-03-02 21:36:09		and lets call the unique search term method, Method 2.
2018-03-02 21:36:09		If we go with Method 1, and got that working, we could match the entirety of the pubmed data with every university in the united states... so long as the med school field of the physicians includes the universities (i'm looking into this now)
2018-03-02 21:36:09		Now for method 2. With method 2, we need to manually figure out which terms to search to match each individual school. (which is reasonable for the 150 Official medical schools. but not for 990 entries ) and I already kinda did something like that. We would probably get fewer hits, but seems much more feasible. 
2018-03-02 21:39:53	jesse	your script is a good starter file though. 
2018-03-02 22:31:25	jesse	I took a lil bit of time to compile "YetAnotherListOfMedSchools" in the drive. this is the list of med schools obtained through filtering out duplicates in the physician data. there are around 440 entries.... which is greater than the 150 and less than the 990 of the other lists. 
2018-03-02 22:31:25		im goin to bed. gnight dude 
2018-03-03 16:20:19	Sagar	I didn't thought about the ngram stuff. You are right. I was trying to figure out if there is a better way but I don't think so 
2018-03-03 16:20:39	Sagar	I was making the names shorter in the yet another list file 
2018-03-03 16:20:55	Sagar	But do you think it's a good idea to go with that 
2018-03-03 16:21:28	Sagar	Because there are names that are left with nothing in the end 
2018-03-03 17:33:48	Sagar	I have made another column in that yet another file 'ABB_NAME' containing abbreviated version of names 
2018-03-03 17:34:32	Sagar	I don't know how it will be helpful 
2018-03-03 19:25:59	jesse	we need the list of medical schools for the pubmed articles so we can compare manually to see if there are any patterns. 
2018-03-03 19:46:59	Sagar	What I have created is of any help? 
2018-03-03 19:47:53	Sagar	One thing dude, I won't be able to work now until Thursday as I am going Silicon Valley for the break! 
2018-03-03 19:48:20	jesse	neat!! what are ya going there for? 
2018-03-03 19:51:05	jesse	And I haven't looked at the abbreviations you made yet. I'm currently looking at generating the list of pubmed med schools 
2018-03-03 19:54:51	Sagar	I am going with the University. The Entrepreneurship at NC State selects 14 students every year for that. We will be having trips to companies and learn more about the tech and business 
2018-03-03 19:56:08	Sagar	Okay I am dealing with packing and stuff now lol. I have to reach airport by 4:30am! 
2018-03-03 19:57:51	jesse	thats pretty cool. I think I'd rather hang with my family to be honest lol. But that does sound interesting. 
2018-03-03 19:59:44	Sagar	That's great dude. I am looking forward to this, let's see what I gain from it. 
2018-03-09 17:27:34	Sagar	Hey Jesse,
2018-03-09 17:27:34		How's it going? 
2018-03-09 17:28:29	Sagar	How was the meeting yesterday? 
2018-03-09 17:43:22	jesse	Hey Sagar, its going alright. there was no meeting yesterday. how was your trip? 
2018-03-09 18:14:54	Sagar	Cool! There was a meeting to showcase to orphanet people yesterday, I was just wondering what happened in that. It was good man, I got to see the environment in the silicon valley and met some really cool people. Listen to success stories of some NC State alumns and take some inspirational lessons 
2018-03-09 18:15:37	Sagar	What are the requirements now that we have to work on and what have been accomplished so far? 
2018-03-09 18:35:55	jesse	So, this week, I ran into quite a few issues but the important thing is that I made a script to take all of the pubmed stuff and compare the last names and the medical schools. The comparison is just stripping out some common words and checking if there is a direct match. There was a huge issue with using a nested for loop with the data. With as many articles and specialists there are, it would take an estimated 600 days to finish. So I started on a different approach. I 
2018-03-09 18:36:19	jesse	I plan on making separate sql statements for each state and doing comparisons per each state 
2018-03-09 18:36:50	jesse	I did it with NC med schools and got around 642 matches... which is pretty low I think, but we can ngram it later. 
2018-03-09 18:37:12	jesse	My new script takes about 30mins for just NC. 
2018-03-09 18:38:17	jesse	I also modified my scripts to only work with SQL... if we did CSV's, we would run into all the memory issues I had this week. 
2018-03-09 18:39:51	jesse	As for where we need to go, I need the states (2 letters) that each of the 404 med schools within YetAnotherMedSchoolList. I imagine this will take some manual work.
2018-03-09 18:39:51		I will also need to generate the sql statements based on the states and the med schools. 
2018-03-09 18:40:13	jesse	I talked to arun about this as well, but idk if he is trying to do this. 
2018-03-09 18:40:50	jesse	Anyway, I hit 20 hours for the week so I'm gonna stop messaging and working for the night. 
2018-03-09 18:42:39	Sagar	Okay I'll start doing that manual work now 
2018-03-09 18:43:00	jesse	Sweet! 
2018-03-09 18:44:19	Sagar	642 is low number for med school in NC, we have to find some other way around 
2018-03-09 18:44:56	Sagar	I was afraid of nested loop earlier too 
2018-03-09 18:46:47	Sagar	We can work on generating SQL statements. I will not disturb you anymore 
2018-03-09 18:47:09	Sagar	Thanks! 
2018-03-09 18:47:33	jesse	youre fine. if you want, I can push the script so you can take a look. 
2018-03-09 18:48:09	Sagar	Yes sure. Once I'm done with manual work, I'll try that 
2018-03-09 18:48:24	Sagar	Thanks dude 
2018-03-09 18:50:51	jesse	Its already pushed on rarediseases under scripts/pubmed_crawler/getPhysicianPubmedConnection.py 
2018-03-09 18:51:30	jesse	there is also compareMedSchools.py which helps ya test which hospitals are matching and not matching. 
2018-03-09 18:51:36	jesse	also pushed 
2018-03-09 18:51:54	Sagar	Awesome! Thanks 
2018-03-11 19:37:02	Sagar	Hey Jesse, I have uploaded the file named Medschoolswithstate in the drive 
2018-03-11 19:37:40	Sagar	There are only 6 schools whose name was too general and I can't be sure which ones are they 
2018-03-11 21:08:19	jesse	cool! 
2018-03-13 13:55:53	jesse	dont worry about the monstrous code we wrote, we found a much easier way. 
2018-03-13 14:42:06	Sagar	That's cool. What did you do now? 
2018-03-13 17:21:38	jesse	Same concept, we just SQL queried each last name and compared the two groups. We also created indexes so that the query runs MEGA FASTER. 
2018-03-13 17:21:55	jesse	about 5 lines of code compared to our monstrosity 
2018-03-13 19:51:46	Sagar	That is not completely clear to me but sounds similar but using SQL instead of loading whole data that we did 
2018-03-13 19:52:45	jesse	we just said select * from specialists where lastname=[iteratedVariable] 
2018-03-13 19:52:55	jesse	thats how we got the dataframes 
2018-03-13 19:53:45	Sagar	Hmm cool! 
2018-03-13 19:54:16	Sagar	That solves memory issue too 
2018-03-13 19:54:18	Sagar	Nice 
2018-03-13 19:55:11	jesse	of course, we wouldnt have been able to do that above statement without knowledge of indexes in databases.
2018-03-13 19:55:11		making them speeds up the query super fast. 
2018-03-13 19:55:33	jesse	it would have made our code take 150 days without the indexes 
2018-03-13 19:55:45	jesse	with it, only 4.5 hours 
2018-03-13 19:55:56	Sagar	I need to understand that from you. How you handled indexes 
2018-03-13 19:56:06	Sagar	Wow! That's so efficient 
2018-03-13 19:56:56	jesse	in psql, we just created an index of what we were going to query. you can google that but it has no python code. just one line of psql 
2018-03-13 19:57:29	Sagar	Cool, I'll look at it. Thanks! 
2018-03-13 19:57:43	Sagar	What we have to do now? 
2018-03-13 20:03:02	jesse	wait for meaghan to do a thing and then run the program on power6a... with her permission of course.
2018-03-13 20:03:02		in the mean time, we need a smarter comparisons. Michael wants us to compare first names as well as last, which is easy to implement since I already captured those variables. The first name of the pubmed data includes some middle names, so just split the first name on spaces and get the first value.
2018-03-13 20:03:02		^Once that is done,(and you can handle it if youd like.) we also probably need to figure out the ngrams of the medical school names to see if they are the same or not.
2018-03-13 20:03:02		theres also one more place that the data could get smarter, and that refers to MeSH terms. I can talk about that with you later... Michael and I arent quite sure how to approach that one. 
2018-03-13 20:03:45	jesse	I wonder if first names includes some values that are just initials.... 
2018-03-13 20:03:57	jesse	we'll need to check if thats the case 
2018-03-13 20:17:29	Sagar	Is it possible to use your regex magic to separate first names? In pubmed data the first names are very non uniform and they can be just initials of first and middle name or first full name and middle initial or both full...
2018-03-13 20:17:29		I have made a column for abbreviated names of medical schools but I don't think it will be useful. 
2018-03-13 20:17:29		I tried to look into Mesh thing but again for that we need to have a comprehensive Mesh data that Michael was talking about to compare. 
2018-03-13 20:19:35	jesse	first_name.split(' ') returns a list of words separated by spaces. the first element of the list is the first name.
2018-03-13 20:19:35		if len(first_name) == 1:   
2018-03-13 20:19:35		       compare only the first initial. 
2018-03-13 20:20:23	jesse	thats how I would do it... rather than regex.. 
2018-03-13 20:29:56	Sagar	Right, but I meant how would you handle non uniformity 
2018-03-13 20:30:09	Sagar	That's the reason we were just doing last names 
2018-03-13 20:30:20	jesse	could you give me an example of the nonuniformity? 
2018-03-13 20:31:03	Sagar	In pubmed data the first names are very non uniform and they can be just initials of first and middle name or first full name and middle initial or both full... 
2018-03-13 20:31:10	jesse	to my knowledge it is only
2018-03-13 20:31:10		Firstname Middleinitial
2018-03-13 20:31:10		OR
2018-03-13 20:31:10		firstinitial middleinitail 
2018-03-13 20:31:21	jesse	or first name 
2018-03-13 20:31:28	Sagar	Right 
2018-03-13 20:32:30	Sagar	So just taking the first character of first name in both pubmed and specialist and last name should be same. Will that work? 
2018-03-13 20:32:42	Sagar	I think it should, what's your say 
2018-03-13 20:33:02	jesse	if the length is greater than one, we could just compare the whole name couldnt we? 
2018-03-13 20:33:11	Sagar	We did not even have to perform split. 
2018-03-13 20:33:36	Sagar	Right but if it's greater than one it can have middle name as well 
2018-03-13 20:33:48	Sagar	Then we have to do split 
2018-03-13 20:33:58	jesse	whats wrong with doing split? 
2018-03-13 20:34:40	Sagar	Nothing wrong I was just suggesting a simpler way with one less operation 
2018-03-13 20:35:09	jesse	yeah. I think it would be better if we included the full first name if we can. 
2018-03-13 20:35:37	Sagar	Yes true it will be more accurate than just first character 
2018-03-13 20:36:28	jesse	start with the split, then see if the first item has a length greater than 1, and if it does, compare the first item with the specialist first name.. else compare the first letters of each first name. 
2018-03-13 20:37:07	Sagar	Right 
2018-03-13 20:37:53	jesse	are you gonna put in that code? or should i? I'm not looking at this stuff right now. 
2018-03-13 20:38:37	Sagar	I'm doing other thing now but will try to code that late night 
2018-03-13 20:38:46	jesse	ok 
2018-03-13 20:39:01	Sagar	Have you pushed the new code? 
2018-03-13 20:39:13	Sagar	I'll make changes in that only 
2018-03-13 20:39:42	jesse	yeah its pushed 
2018-03-13 20:40:18	Sagar	Cool getphysicianpubmedconnection? 
2018-03-13 20:44:50	jesse	yea 
2018-03-13 20:47:15	Sagar	Cool thanks! 
2018-03-14 10:03:48	jesse	did you add the piece of code? Michael and Meaghan are asking me to run it. 
2018-03-14 10:08:13	jesse	I just wrote it  up. didn't test though 
2018-03-14 14:59:37	Sagar	Did you ran the program? 
2018-03-14 15:00:11	jesse	yeah. i haven't tested it much but it only found 8 connections in 500 last names... 
2018-03-14 15:01:19	Sagar	That's low though 
2018-03-14 15:02:05	jesse	if ya want, you can work on it, and be sure its doing what its supposed to.
2018-03-14 15:02:05		im busy though, so I cant. 
2018-03-14 15:03:18	Sagar	Alright, not sure if I can but will try 
2018-03-14 15:05:04	jesse	i just pushed it. 
2018-03-14 15:23:30	Sagar	Cool 
2018-03-25 19:28:11	Sagar	Hey Jesse, I need your help in running a script on pubmed-jesse vm. Will you please run that? I have pushed it on the repo you can pull it from there 
2018-03-25 19:28:28	jesse	whats it for? 
2018-03-25 19:29:03	Sagar	For Hospitals database 
2018-03-25 19:29:17	Sagar	csv to django 
2018-03-25 19:29:50	Sagar	It's located here: rarediseases/scripts/hospitals/hospital_csv_to_django.py 
2018-03-25 19:30:04	Sagar	And there is a csv file in proxy server 
2018-03-25 19:30:30	Sagar	Hospital_General_Information.csv 
2018-03-25 19:30:49	Sagar	I think I have to send it to you, it will be on my proxy server 
2018-03-25 19:33:02	Sagar	@Sagar uploaded a file: https://ncstateuniversityitng.slack.com/files/U8S9YMBF0/F9V8MP97B/hospital_general_information.csv (Hospital_General_Information.csv) 
2018-03-25 19:33:08	jesse	why not just do this on your own machine? i assume the csv isnt big. 
2018-03-25 19:33:50	Sagar	My machine slows down when I run the project scripts 
2018-03-25 19:34:52	Sagar	I'm also having trouble running it on my vm environment 
2018-03-25 19:35:03	jesse	ok 
2018-03-25 19:35:16	Sagar	Thanks dude! 
2018-03-25 19:46:33	jesse	your script wasn't working so I just imported the data in a way that I know how to. did you want a .sql file? 
2018-03-25 19:49:03	Sagar	I want the same file as you gave for Specialists 
2018-03-25 19:49:15	Sagar	Was it SQL? 
2018-03-25 19:49:31	jesse	probably. could have been csv though 
2018-03-25 19:49:51	Sagar	I had the csv but I was told to convert to Django 
2018-03-25 19:50:05	Sagar	How can you transfer that sql file? 
2018-03-25 19:50:35	Sagar	or how did you do for specialists? I will do same for this and give it to Meaghan 
2018-03-25 19:51:38	jesse	@jesse uploaded a file: https://ncstateuniversityitng.slack.com/files/U8QQFV2GG/F9VUH09TP/hospital.sql (hospital) 
2018-03-25 19:52:05		getting channel history...
2018-02-28 20:56:18	Sagar	Hey Jesse, Were you able to figure out the way to solve pubmed issue we were facing or is there something you are working on? 
2018-02-28 20:57:24	jesse	have you read what i've written on the rarediseases channel? 
2018-02-28 20:57:55	Sagar	Yeah I went through that 
2018-02-28 20:59:06	Sagar	It seems that we are stuck in this and I have to figure out what I need to work on 
2018-02-28 21:01:14	jesse	thats basically where I'm at. What dr. kowolenko actually asked for for this week was a few physicians that worked with our links... so I'm trying to just make psql statements that would show us physicians based on the name and medical school displayed in the pubmed data... I'm having trouble with this as well... 
2018-02-28 21:02:53	Sagar	Name is not completely entered in the DB. First name is abbreviated. Is this where you are facing problem? 
2018-02-28 21:03:03	jesse	no 
2018-02-28 21:03:10	jesse	we can do something like : 
2018-02-28 21:03:36	jesse	select * from physicians where last_name='SIMPSON' and first_name like 'J%' 
2018-02-28 21:03:51	jesse	where % is a wild card for the first name. 
2018-02-28 21:04:29	jesse	I'm going through this list of people who published papers in Chapel hill... but they do not seem to be physicians 
2018-02-28 21:05:11	Sagar	Okay got it. 
2018-02-28 21:05:11		They are mostly professor or researchers I guess.  (edited)
2018-02-28 21:08:47	jesse	yeah. guess so... still doesn't help cuz we are supposed to have more than just Michael Knowles 
2018-02-28 21:10:04	jesse	I'm getting some hits now that I fresh imported the data... I think I may have deleted entries. 
2018-02-28 21:10:40	Sagar	Yes I understand... is Michael Knowles is also a researcher just saw 
2018-02-28 21:11:21	Sagar	Distinguished Professor of Medicine 
2018-02-28 21:11:53	jesse	yeah. I think I'm getting some hits now. Is there a way to write python that executes these queries and prints the data somewhere? 
2018-02-28 21:12:33	Sagar	You mean executing psql? 
2018-02-28 21:13:18	Sagar	I think shell can be helpful but I don't think Python can do that in my knowledge 
2018-02-28 21:14:43	jesse	i'd prefer to generate a CSV of results rather than just things I would copy/paste into a terminal for the sake of showing Dr. Kowolenko that these links can be made 
2018-02-28 21:16:07	jesse	i guess that doesn't matter 
2018-02-28 21:22:17	Sagar	Yes right. That can be done later 
2018-02-28 21:24:09	Sagar	https://gis.stackexchange.com/questions/91443/how-to-execute-sql-lines-in-postgresql-using-python
2018-02-28 21:24:09		How to execute sql lines in postgresql using python?
2018-02-28 21:24:09		I use postgresql 8.4 to route a river network, the following is my code typed in pgAdmin and the result is fine, select * from driving_distance ('select gid as id, start_id::int4 as source, end_id:: 
2018-02-28 21:24:27	Sagar	Try this 
2018-02-28 21:29:18	jesse	thanks. I'm not gonna focus on that now. I'm kinda tired. The links definitely seem like they can happen so long as we figure out how to match the medical school names. all of my examples were chapel hill or virginia commonwealth 
2018-02-28 21:33:17	Sagar	Yes but we tried them and the search was treating it as Full Name 
2018-02-28 21:33:53	jesse	im not talkin about pubmed 
2018-02-28 21:34:27	Sagar	Oh okay 
2018-02-28 21:37:25	jesse	i gotcha. I wouldn't worry too much about anything tonight. i think we got everything we need for the week. 
2018-02-28 21:46:13	Sagar	Okay cool 
2018-02-28 21:46:27	Sagar	Good Night Dude :slightly_smiling_face: 
2018-02-28 21:58:05	jesse	good night 
2018-03-02 18:31:38	Sagar	Hey Jesse, you have given a decent amount of time so what would you like me to help you with? 
2018-03-02 18:47:24	jesse	yep. so the biggest thing is that we need some list of schools and universities to compare the two data sets. Either that, or if you have some function that could compare the names of the medical schools of pubmed to the medical schools on the physician data. Arun may have started workin on this but I havent gotten any word back from him 
2018-03-02 18:53:15	Sagar	Okay so what format are the names of medical schools of pubmed and physician data is? Is it csv? 
2018-03-02 18:53:41	Sagar	And what do you want from comparison? 
2018-03-02 18:54:40	jesse	I'll upload some stuff to the google drive. hold on. 
2018-03-02 18:54:56	Sagar	Okay 
2018-03-02 18:56:35	jesse	These files may be too big for google drive 
2018-03-02 18:58:10	jesse	2.5 gigabytes for just A-E.... I don't understand why the pubmed data is so big this time though though... 
2018-03-02 18:59:24	jesse	oh right.. I took out the NC filter 
2018-03-02 19:05:18	jesse	I'm in the process of uploading some of the pubmed data to google drive. It is certainly not all of it. I also pushed up what I did with the universities. 
2018-03-02 19:06:17	jesse	dont expect that to be representative of the whole data A-E. 
2018-03-02 19:07:27	jesse	but you can use it to help you. I also left up the pubmed data thats only NC 
2018-03-02 19:07:40	jesse	The authors are in a new table now btw 
2018-03-02 19:08:54	jesse	CSV i mean 
2018-03-02 19:15:06	Sagar	Can you please also upload the Physician data 
2018-03-02 19:15:59	Sagar	Let me try to compare the names of school of physicians and pub med 
2018-03-02 19:15:59	jesse	https://data.medicare.gov/Physician-Compare/Physician-Compare-National-Downloadable-File/mj5m-pzi6
2018-03-02 19:15:59		Physician Compare National Downloadable File | Data.Medicare.gov
2018-03-02 19:15:59		Physician Compare National Downloadable File - The Physician Compare National Downloadable File is organized at the individual eligible professional level; each line is unique at the professional/enrollment record/Group Practice/address level. Professionals with multiple Medicare enrollment records and/or single enrollments linking to multiple practice location addresses are listed on multiple lines. 
2018-03-02 19:16:11	Sagar	And which pub med data should I use 
2018-03-02 19:16:47	jesse	you can download it there. I dont want to upload it since I only have so much google drive space. 
2018-03-02 19:17:34	Sagar	Yes I got it :+1: 
2018-03-02 19:17:52	Sagar	Do you want me to download it with NC filter? 
2018-03-02 19:18:10	jesse	nope 
2018-03-02 19:18:19	Sagar	Okay 
2018-03-02 19:18:26	Sagar	And what about pub med 
2018-03-02 19:18:39	Sagar	Which data should I use to compare? 
2018-03-02 19:20:55	jesse	we dont have all of the data yet. we just need to compare the medical schools from pubmed that we have. it shouldnt matter which set you use. I recommend the one that says authors in the file name. thats gonna be the file type that Ill eventually hand over to you or someone else... 
2018-03-02 19:21:41	jesse	and these files are huge. I didnt upload the whole thing. 
2018-03-02 20:23:53	Sagar	Dude every time I am trying to run the script to compare medical schools in pub med and physician data my laptop hangs up 
2018-03-02 20:24:13	Sagar	I realized the physician data file is 760MB 
2018-03-02 20:27:34	jesse	yeah. these are monsters of files 
2018-03-02 20:28:02	jesse	but imagine how much better it would be than just nc. 
2018-03-02 20:29:41	jesse	Meaghan got me a VM that I'm running a script on. you could try asking her for one.
2018-03-02 20:29:41		but also keep efficiency in mind when writing your script. 
2018-03-02 20:32:45	Sagar	Yeah I was breaking my loop for 10000 entries even then it hasn't processed yet. The files are so big that just reading/processing them is taking the whole time 
2018-03-02 20:37:44	jesse	youll have to share the program with me. Ill see what I can do tomorrow or something. 
2018-03-02 20:38:09	Sagar	You said 'so the biggest thing is that we need some list of schools and universities to compare the two data sets', did you mean school names list or after comparison 
2018-03-02 20:38:13	Sagar	Yes sure 
2018-03-02 20:43:26	Sagar	@Sagar uploaded a file: https://ncstateuniversityitng.slack.com/files/U8S9YMBF0/F9JRANBB8/med_school_comparison.py (Med_School_Comparison.py) 
2018-03-02 20:44:00	Sagar	Thanks 
2018-03-02 21:36:09	jesse	i hope you understand that checking if the substring is in the pubmed affiliations is not enough. You are going to get very few hits since the university data is not uniform. N-Gram analysis is one way to try to accomplish this goal. But that is where the problem of efficiency arises. 
2018-03-02 21:36:09		Ideally, we need a list of searchable terms that are unique to each university/medical school. Imagine being able to search the affiliations for 'Chapel Hill' and then searching for all of the physicians whose med school was 'Chapel Hill'. That would be easier than trying every combination of 'University of North Carolina at Chapel Hill School of Medicine' and comparing that to the combinations of other data in the physicians table.
2018-03-02 21:36:09		lets call the N-Gram Method, Method 1.
2018-03-02 21:36:09		and lets call the unique search term method, Method 2.
2018-03-02 21:36:09		If we go with Method 1, and got that working, we could match the entirety of the pubmed data with every university in the united states... so long as the med school field of the physicians includes the universities (i'm looking into this now)
2018-03-02 21:36:09		Now for method 2. With method 2, we need to manually figure out which terms to search to match each individual school. (which is reasonable for the 150 Official medical schools. but not for 990 entries ) and I already kinda did something like that. We would probably get fewer hits, but seems much more feasible. 
2018-03-02 21:39:53	jesse	your script is a good starter file though. 
2018-03-02 22:31:25	jesse	I took a lil bit of time to compile "YetAnotherListOfMedSchools" in the drive. this is the list of med schools obtained through filtering out duplicates in the physician data. there are around 440 entries.... which is greater than the 150 and less than the 990 of the other lists. 
2018-03-02 22:31:25		im goin to bed. gnight dude 
2018-03-03 16:20:19	Sagar	I didn't thought about the ngram stuff. You are right. I was trying to figure out if there is a better way but I don't think so 
2018-03-03 16:20:39	Sagar	I was making the names shorter in the yet another list file 
2018-03-03 16:20:55	Sagar	But do you think it's a good idea to go with that 
2018-03-03 16:21:28	Sagar	Because there are names that are left with nothing in the end 
2018-03-03 17:33:48	Sagar	I have made another column in that yet another file 'ABB_NAME' containing abbreviated version of names 
2018-03-03 17:34:32	Sagar	I don't know how it will be helpful 
2018-03-03 19:25:59	jesse	we need the list of medical schools for the pubmed articles so we can compare manually to see if there are any patterns. 
2018-03-03 19:46:59	Sagar	What I have created is of any help? 
2018-03-03 19:47:53	Sagar	One thing dude, I won't be able to work now until Thursday as I am going Silicon Valley for the break! 
2018-03-03 19:48:20	jesse	neat!! what are ya going there for? 
2018-03-03 19:51:05	jesse	And I haven't looked at the abbreviations you made yet. I'm currently looking at generating the list of pubmed med schools 
2018-03-03 19:54:51	Sagar	I am going with the University. The Entrepreneurship at NC State selects 14 students every year for that. We will be having trips to companies and learn more about the tech and business 
2018-03-03 19:56:08	Sagar	Okay I am dealing with packing and stuff now lol. I have to reach airport by 4:30am! 
2018-03-03 19:57:51	jesse	thats pretty cool. I think I'd rather hang with my family to be honest lol. But that does sound interesting. 
2018-03-03 19:59:44	Sagar	That's great dude. I am looking forward to this, let's see what I gain from it. 
2018-03-09 17:27:34	Sagar	Hey Jesse,
2018-03-09 17:27:34		How's it going? 
2018-03-09 17:28:29	Sagar	How was the meeting yesterday? 
2018-03-09 17:43:22	jesse	Hey Sagar, its going alright. there was no meeting yesterday. how was your trip? 
2018-03-09 18:14:54	Sagar	Cool! There was a meeting to showcase to orphanet people yesterday, I was just wondering what happened in that. It was good man, I got to see the environment in the silicon valley and met some really cool people. Listen to success stories of some NC State alumns and take some inspirational lessons 
2018-03-09 18:15:37	Sagar	What are the requirements now that we have to work on and what have been accomplished so far? 
2018-03-09 18:35:55	jesse	So, this week, I ran into quite a few issues but the important thing is that I made a script to take all of the pubmed stuff and compare the last names and the medical schools. The comparison is just stripping out some common words and checking if there is a direct match. There was a huge issue with using a nested for loop with the data. With as many articles and specialists there are, it would take an estimated 600 days to finish. So I started on a different approach. I 
2018-03-09 18:36:19	jesse	I plan on making separate sql statements for each state and doing comparisons per each state 
2018-03-09 18:36:50	jesse	I did it with NC med schools and got around 642 matches... which is pretty low I think, but we can ngram it later. 
2018-03-09 18:37:12	jesse	My new script takes about 30mins for just NC. 
2018-03-09 18:38:17	jesse	I also modified my scripts to only work with SQL... if we did CSV's, we would run into all the memory issues I had this week. 
2018-03-09 18:39:51	jesse	As for where we need to go, I need the states (2 letters) that each of the 404 med schools within YetAnotherMedSchoolList. I imagine this will take some manual work.
2018-03-09 18:39:51		I will also need to generate the sql statements based on the states and the med schools. 
2018-03-09 18:40:13	jesse	I talked to arun about this as well, but idk if he is trying to do this. 
2018-03-09 18:40:50	jesse	Anyway, I hit 20 hours for the week so I'm gonna stop messaging and working for the night. 
2018-03-09 18:42:39	Sagar	Okay I'll start doing that manual work now 
2018-03-09 18:43:00	jesse	Sweet! 
2018-03-09 18:44:19	Sagar	642 is low number for med school in NC, we have to find some other way around 
2018-03-09 18:44:56	Sagar	I was afraid of nested loop earlier too 
2018-03-09 18:46:47	Sagar	We can work on generating SQL statements. I will not disturb you anymore 
2018-03-09 18:47:09	Sagar	Thanks! 
2018-03-09 18:47:33	jesse	youre fine. if you want, I can push the script so you can take a look. 
2018-03-09 18:48:09	Sagar	Yes sure. Once I'm done with manual work, I'll try that 
2018-03-09 18:48:24	Sagar	Thanks dude 
2018-03-09 18:50:51	jesse	Its already pushed on rarediseases under scripts/pubmed_crawler/getPhysicianPubmedConnection.py 
2018-03-09 18:51:30	jesse	there is also compareMedSchools.py which helps ya test which hospitals are matching and not matching. 
2018-03-09 18:51:36	jesse	also pushed 
2018-03-09 18:51:54	Sagar	Awesome! Thanks 
2018-03-11 19:37:02	Sagar	Hey Jesse, I have uploaded the file named Medschoolswithstate in the drive 
2018-03-11 19:37:40	Sagar	There are only 6 schools whose name was too general and I can't be sure which ones are they 
2018-03-11 21:08:19	jesse	cool! 
2018-03-13 13:55:53	jesse	dont worry about the monstrous code we wrote, we found a much easier way. 
2018-03-13 14:42:06	Sagar	That's cool. What did you do now? 
2018-03-13 17:21:38	jesse	Same concept, we just SQL queried each last name and compared the two groups. We also created indexes so that the query runs MEGA FASTER. 
2018-03-13 17:21:55	jesse	about 5 lines of code compared to our monstrosity 
2018-03-13 19:51:46	Sagar	That is not completely clear to me but sounds similar but using SQL instead of loading whole data that we did 
2018-03-13 19:52:45	jesse	we just said select * from specialists where lastname=[iteratedVariable] 
2018-03-13 19:52:55	jesse	thats how we got the dataframes 
2018-03-13 19:53:45	Sagar	Hmm cool! 
2018-03-13 19:54:16	Sagar	That solves memory issue too 
2018-03-13 19:54:18	Sagar	Nice 
2018-03-13 19:55:11	jesse	of course, we wouldnt have been able to do that above statement without knowledge of indexes in databases.
2018-03-13 19:55:11		making them speeds up the query super fast. 
2018-03-13 19:55:33	jesse	it would have made our code take 150 days without the indexes 
2018-03-13 19:55:45	jesse	with it, only 4.5 hours 
2018-03-13 19:55:56	Sagar	I need to understand that from you. How you handled indexes 
2018-03-13 19:56:06	Sagar	Wow! That's so efficient 
2018-03-13 19:56:56	jesse	in psql, we just created an index of what we were going to query. you can google that but it has no python code. just one line of psql 
2018-03-13 19:57:29	Sagar	Cool, I'll look at it. Thanks! 
2018-03-13 19:57:43	Sagar	What we have to do now? 
2018-03-13 20:03:02	jesse	wait for meaghan to do a thing and then run the program on power6a... with her permission of course.
2018-03-13 20:03:02		in the mean time, we need a smarter comparisons. Michael wants us to compare first names as well as last, which is easy to implement since I already captured those variables. The first name of the pubmed data includes some middle names, so just split the first name on spaces and get the first value.
2018-03-13 20:03:02		^Once that is done,(and you can handle it if youd like.) we also probably need to figure out the ngrams of the medical school names to see if they are the same or not.
2018-03-13 20:03:02		theres also one more place that the data could get smarter, and that refers to MeSH terms. I can talk about that with you later... Michael and I arent quite sure how to approach that one. 
2018-03-13 20:03:45	jesse	I wonder if first names includes some values that are just initials.... 
2018-03-13 20:03:57	jesse	we'll need to check if thats the case 
2018-03-13 20:17:29	Sagar	Is it possible to use your regex magic to separate first names? In pubmed data the first names are very non uniform and they can be just initials of first and middle name or first full name and middle initial or both full...
2018-03-13 20:17:29		I have made a column for abbreviated names of medical schools but I don't think it will be useful. 
2018-03-13 20:17:29		I tried to look into Mesh thing but again for that we need to have a comprehensive Mesh data that Michael was talking about to compare. 
2018-03-13 20:19:35	jesse	first_name.split(' ') returns a list of words separated by spaces. the first element of the list is the first name.
2018-03-13 20:19:35		if len(first_name) == 1:   
2018-03-13 20:19:35		       compare only the first initial. 
2018-03-13 20:20:23	jesse	thats how I would do it... rather than regex.. 
2018-03-13 20:29:56	Sagar	Right, but I meant how would you handle non uniformity 
2018-03-13 20:30:09	Sagar	That's the reason we were just doing last names 
2018-03-13 20:30:20	jesse	could you give me an example of the nonuniformity? 
2018-03-13 20:31:03	Sagar	In pubmed data the first names are very non uniform and they can be just initials of first and middle name or first full name and middle initial or both full... 
2018-03-13 20:31:10	jesse	to my knowledge it is only
2018-03-13 20:31:10		Firstname Middleinitial
2018-03-13 20:31:10		OR
2018-03-13 20:31:10		firstinitial middleinitail 
2018-03-13 20:31:21	jesse	or first name 
2018-03-13 20:31:28	Sagar	Right 
2018-03-13 20:32:30	Sagar	So just taking the first character of first name in both pubmed and specialist and last name should be same. Will that work? 
2018-03-13 20:32:42	Sagar	I think it should, what's your say 
2018-03-13 20:33:02	jesse	if the length is greater than one, we could just compare the whole name couldnt we? 
2018-03-13 20:33:11	Sagar	We did not even have to perform split. 
2018-03-13 20:33:36	Sagar	Right but if it's greater than one it can have middle name as well 
2018-03-13 20:33:48	Sagar	Then we have to do split 
2018-03-13 20:33:58	jesse	whats wrong with doing split? 
2018-03-13 20:34:40	Sagar	Nothing wrong I was just suggesting a simpler way with one less operation 
2018-03-13 20:35:09	jesse	yeah. I think it would be better if we included the full first name if we can. 
2018-03-13 20:35:37	Sagar	Yes true it will be more accurate than just first character 
2018-03-13 20:36:28	jesse	start with the split, then see if the first item has a length greater than 1, and if it does, compare the first item with the specialist first name.. else compare the first letters of each first name. 
2018-03-13 20:37:07	Sagar	Right 
2018-03-13 20:37:53	jesse	are you gonna put in that code? or should i? I'm not looking at this stuff right now. 
2018-03-13 20:38:37	Sagar	I'm doing other thing now but will try to code that late night 
2018-03-13 20:38:46	jesse	ok 
2018-03-13 20:39:01	Sagar	Have you pushed the new code? 
2018-03-13 20:39:13	Sagar	I'll make changes in that only 
2018-03-13 20:39:42	jesse	yeah its pushed 
2018-03-13 20:40:18	Sagar	Cool getphysicianpubmedconnection? 
2018-03-13 20:44:50	jesse	yea 
2018-03-13 20:47:15	Sagar	Cool thanks! 
2018-03-14 10:03:48	jesse	did you add the piece of code? Michael and Meaghan are asking me to run it. 
2018-03-14 10:08:13	jesse	I just wrote it  up. didn't test though 
2018-03-14 14:59:37	Sagar	Did you ran the program? 
2018-03-14 15:00:11	jesse	yeah. i haven't tested it much but it only found 8 connections in 500 last names... 
2018-03-14 15:01:19	Sagar	That's low though 
2018-03-14 15:02:05	jesse	if ya want, you can work on it, and be sure its doing what its supposed to.
2018-03-14 15:02:05		im busy though, so I cant. 
2018-03-14 15:03:18	Sagar	Alright, not sure if I can but will try 
2018-03-14 15:05:04	jesse	i just pushed it. 
2018-03-14 15:23:30	Sagar	Cool 
2018-03-25 19:28:11	Sagar	Hey Jesse, I need your help in running a script on pubmed-jesse vm. Will you please run that? I have pushed it on the repo you can pull it from there 
2018-03-25 19:28:28	jesse	whats it for? 
2018-03-25 19:29:03	Sagar	For Hospitals database 
2018-03-25 19:29:17	Sagar	csv to django 
2018-03-25 19:29:50	Sagar	It's located here: rarediseases/scripts/hospitals/hospital_csv_to_django.py 
2018-03-25 19:30:04	Sagar	And there is a csv file in proxy server 
2018-03-25 19:30:30	Sagar	Hospital_General_Information.csv 
2018-03-25 19:30:49	Sagar	I think I have to send it to you, it will be on my proxy server 
2018-03-25 19:33:02	Sagar	@Sagar uploaded a file: https://ncstateuniversityitng.slack.com/files/U8S9YMBF0/F9V8MP97B/hospital_general_information.csv (Hospital_General_Information.csv) 
2018-03-25 19:33:08	jesse	why not just do this on your own machine? i assume the csv isnt big. 
2018-03-25 19:33:50	Sagar	My machine slows down when I run the project scripts 
2018-03-25 19:34:52	Sagar	I'm also having trouble running it on my vm environment 
2018-03-25 19:35:03	jesse	ok 
2018-03-25 19:35:16	Sagar	Thanks dude! 
2018-03-25 19:46:33	jesse	your script wasn't working so I just imported the data in a way that I know how to. did you want a .sql file? 
2018-03-25 19:49:03	Sagar	I want the same file as you gave for Specialists 
2018-03-25 19:49:15	Sagar	Was it SQL? 
2018-03-25 19:49:31	jesse	probably. could have been csv though 
2018-03-25 19:49:51	Sagar	I had the csv but I was told to convert to Django 
2018-03-25 19:50:05	Sagar	How can you transfer that sql file? 
2018-03-25 19:50:35	Sagar	or how did you do for specialists? I will do same for this and give it to Meaghan 
2018-03-25 19:51:38	jesse	@jesse uploaded a file: https://ncstateuniversityitng.slack.com/files/U8QQFV2GG/F9VUH09TP/hospital.sql (hospital) 
2018-03-25 19:52:37	jesse	django is just a ORM for sql 
2018-04-19 16:43:47		getting channel history...
2018-02-28 21:01:14	jesse	thats basically where I'm at. What dr. kowolenko actually asked for for this week was a few physicians that worked with our links... so I'm trying to just make psql statements that would show us physicians based on the name and medical school displayed in the pubmed data... I'm having trouble with this as well... 
2018-02-28 21:02:53	Sagar	Name is not completely entered in the DB. First name is abbreviated. Is this where you are facing problem? 
2018-02-28 21:03:03	jesse	no 
2018-02-28 21:03:10	jesse	we can do something like : 
2018-02-28 21:03:36	jesse	select * from physicians where last_name='SIMPSON' and first_name like 'J%' 
2018-02-28 21:03:51	jesse	where % is a wild card for the first name. 
2018-02-28 21:04:29	jesse	I'm going through this list of people who published papers in Chapel hill... but they do not seem to be physicians 
2018-02-28 21:05:11	Sagar	Okay got it. 
2018-02-28 21:05:11		They are mostly professor or researchers I guess.  (edited)
2018-02-28 21:08:47	jesse	yeah. guess so... still doesn't help cuz we are supposed to have more than just Michael Knowles 
2018-02-28 21:10:04	jesse	I'm getting some hits now that I fresh imported the data... I think I may have deleted entries. 
2018-02-28 21:10:40	Sagar	Yes I understand... is Michael Knowles is also a researcher just saw 
2018-02-28 21:11:21	Sagar	Distinguished Professor of Medicine 
2018-02-28 21:11:53	jesse	yeah. I think I'm getting some hits now. Is there a way to write python that executes these queries and prints the data somewhere? 
2018-02-28 21:12:33	Sagar	You mean executing psql? 
2018-02-28 21:13:18	Sagar	I think shell can be helpful but I don't think Python can do that in my knowledge 
2018-02-28 21:14:43	jesse	i'd prefer to generate a CSV of results rather than just things I would copy/paste into a terminal for the sake of showing Dr. Kowolenko that these links can be made 
2018-02-28 21:16:07	jesse	i guess that doesn't matter 
2018-02-28 21:22:17	Sagar	Yes right. That can be done later 
2018-02-28 21:24:09	Sagar	https://gis.stackexchange.com/questions/91443/how-to-execute-sql-lines-in-postgresql-using-python
2018-02-28 21:24:09		How to execute sql lines in postgresql using python?
2018-02-28 21:24:09		I use postgresql 8.4 to route a river network, the following is my code typed in pgAdmin and the result is fine, select * from driving_distance ('select gid as id, start_id::int4 as source, end_id:: 
2018-02-28 21:24:27	Sagar	Try this 
2018-02-28 21:29:18	jesse	thanks. I'm not gonna focus on that now. I'm kinda tired. The links definitely seem like they can happen so long as we figure out how to match the medical school names. all of my examples were chapel hill or virginia commonwealth 
2018-02-28 21:33:17	Sagar	Yes but we tried them and the search was treating it as Full Name 
2018-02-28 21:33:53	jesse	im not talkin about pubmed 
2018-02-28 21:34:27	Sagar	Oh okay 
2018-02-28 21:37:25	jesse	i gotcha. I wouldn't worry too much about anything tonight. i think we got everything we need for the week. 
2018-02-28 21:46:13	Sagar	Okay cool 
2018-02-28 21:46:27	Sagar	Good Night Dude :slightly_smiling_face: 
2018-02-28 21:58:05	jesse	good night 
2018-03-02 18:31:38	Sagar	Hey Jesse, you have given a decent amount of time so what would you like me to help you with? 
2018-03-02 18:47:24	jesse	yep. so the biggest thing is that we need some list of schools and universities to compare the two data sets. Either that, or if you have some function that could compare the names of the medical schools of pubmed to the medical schools on the physician data. Arun may have started workin on this but I havent gotten any word back from him 
2018-03-02 18:53:15	Sagar	Okay so what format are the names of medical schools of pubmed and physician data is? Is it csv? 
2018-03-02 18:53:41	Sagar	And what do you want from comparison? 
2018-03-02 18:54:40	jesse	I'll upload some stuff to the google drive. hold on. 
2018-03-02 18:54:56	Sagar	Okay 
2018-03-02 18:56:35	jesse	These files may be too big for google drive 
2018-03-02 18:58:10	jesse	2.5 gigabytes for just A-E.... I don't understand why the pubmed data is so big this time though though... 
2018-03-02 18:59:24	jesse	oh right.. I took out the NC filter 
2018-03-02 19:05:18	jesse	I'm in the process of uploading some of the pubmed data to google drive. It is certainly not all of it. I also pushed up what I did with the universities. 
2018-03-02 19:06:17	jesse	dont expect that to be representative of the whole data A-E. 
2018-03-02 19:07:27	jesse	but you can use it to help you. I also left up the pubmed data thats only NC 
2018-03-02 19:07:40	jesse	The authors are in a new table now btw 
2018-03-02 19:08:54	jesse	CSV i mean 
2018-03-02 19:15:06	Sagar	Can you please also upload the Physician data 
2018-03-02 19:15:59	Sagar	Let me try to compare the names of school of physicians and pub med 
2018-03-02 19:15:59	jesse	https://data.medicare.gov/Physician-Compare/Physician-Compare-National-Downloadable-File/mj5m-pzi6
2018-03-02 19:15:59		Physician Compare National Downloadable File | Data.Medicare.gov
2018-03-02 19:15:59		Physician Compare National Downloadable File - The Physician Compare National Downloadable File is organized at the individual eligible professional level; each line is unique at the professional/enrollment record/Group Practice/address level. Professionals with multiple Medicare enrollment records and/or single enrollments linking to multiple practice location addresses are listed on multiple lines. 
2018-03-02 19:16:11	Sagar	And which pub med data should I use 
2018-03-02 19:16:47	jesse	you can download it there. I dont want to upload it since I only have so much google drive space. 
2018-03-02 19:17:34	Sagar	Yes I got it :+1: 
2018-03-02 19:17:52	Sagar	Do you want me to download it with NC filter? 
2018-03-02 19:18:10	jesse	nope 
2018-03-02 19:18:19	Sagar	Okay 
2018-03-02 19:18:26	Sagar	And what about pub med 
2018-03-02 19:18:39	Sagar	Which data should I use to compare? 
2018-03-02 19:20:55	jesse	we dont have all of the data yet. we just need to compare the medical schools from pubmed that we have. it shouldnt matter which set you use. I recommend the one that says authors in the file name. thats gonna be the file type that Ill eventually hand over to you or someone else... 
2018-03-02 19:21:41	jesse	and these files are huge. I didnt upload the whole thing. 
2018-03-02 20:23:53	Sagar	Dude every time I am trying to run the script to compare medical schools in pub med and physician data my laptop hangs up 
2018-03-02 20:24:13	Sagar	I realized the physician data file is 760MB 
2018-03-02 20:27:34	jesse	yeah. these are monsters of files 
2018-03-02 20:28:02	jesse	but imagine how much better it would be than just nc. 
2018-03-02 20:29:41	jesse	Meaghan got me a VM that I'm running a script on. you could try asking her for one.
2018-03-02 20:29:41		but also keep efficiency in mind when writing your script. 
2018-03-02 20:32:45	Sagar	Yeah I was breaking my loop for 10000 entries even then it hasn't processed yet. The files are so big that just reading/processing them is taking the whole time 
2018-03-02 20:37:44	jesse	youll have to share the program with me. Ill see what I can do tomorrow or something. 
2018-03-02 20:38:09	Sagar	You said 'so the biggest thing is that we need some list of schools and universities to compare the two data sets', did you mean school names list or after comparison 
2018-03-02 20:38:13	Sagar	Yes sure 
2018-03-02 20:43:26	Sagar	@Sagar uploaded a file: https://ncstateuniversityitng.slack.com/files/U8S9YMBF0/F9JRANBB8/med_school_comparison.py (Med_School_Comparison.py) 
2018-03-02 20:44:00	Sagar	Thanks 
2018-03-02 21:36:09	jesse	i hope you understand that checking if the substring is in the pubmed affiliations is not enough. You are going to get very few hits since the university data is not uniform. N-Gram analysis is one way to try to accomplish this goal. But that is where the problem of efficiency arises. 
2018-03-02 21:36:09		Ideally, we need a list of searchable terms that are unique to each university/medical school. Imagine being able to search the affiliations for 'Chapel Hill' and then searching for all of the physicians whose med school was 'Chapel Hill'. That would be easier than trying every combination of 'University of North Carolina at Chapel Hill School of Medicine' and comparing that to the combinations of other data in the physicians table.
2018-03-02 21:36:09		lets call the N-Gram Method, Method 1.
2018-03-02 21:36:09		and lets call the unique search term method, Method 2.
2018-03-02 21:36:09		If we go with Method 1, and got that working, we could match the entirety of the pubmed data with every university in the united states... so long as the med school field of the physicians includes the universities (i'm looking into this now)
2018-03-02 21:36:09		Now for method 2. With method 2, we need to manually figure out which terms to search to match each individual school. (which is reasonable for the 150 Official medical schools. but not for 990 entries ) and I already kinda did something like that. We would probably get fewer hits, but seems much more feasible. 
2018-03-02 21:39:53	jesse	your script is a good starter file though. 
2018-03-02 22:31:25	jesse	I took a lil bit of time to compile "YetAnotherListOfMedSchools" in the drive. this is the list of med schools obtained through filtering out duplicates in the physician data. there are around 440 entries.... which is greater than the 150 and less than the 990 of the other lists. 
2018-03-02 22:31:25		im goin to bed. gnight dude 
2018-03-03 16:20:19	Sagar	I didn't thought about the ngram stuff. You are right. I was trying to figure out if there is a better way but I don't think so 
2018-03-03 16:20:39	Sagar	I was making the names shorter in the yet another list file 
2018-03-03 16:20:55	Sagar	But do you think it's a good idea to go with that 
2018-03-03 16:21:28	Sagar	Because there are names that are left with nothing in the end 
2018-03-03 17:33:48	Sagar	I have made another column in that yet another file 'ABB_NAME' containing abbreviated version of names 
2018-03-03 17:34:32	Sagar	I don't know how it will be helpful 
2018-03-03 19:25:59	jesse	we need the list of medical schools for the pubmed articles so we can compare manually to see if there are any patterns. 
2018-03-03 19:46:59	Sagar	What I have created is of any help? 
2018-03-03 19:47:53	Sagar	One thing dude, I won't be able to work now until Thursday as I am going Silicon Valley for the break! 
2018-03-03 19:48:20	jesse	neat!! what are ya going there for? 
2018-03-03 19:51:05	jesse	And I haven't looked at the abbreviations you made yet. I'm currently looking at generating the list of pubmed med schools 
2018-03-03 19:54:51	Sagar	I am going with the University. The Entrepreneurship at NC State selects 14 students every year for that. We will be having trips to companies and learn more about the tech and business 
2018-03-03 19:56:08	Sagar	Okay I am dealing with packing and stuff now lol. I have to reach airport by 4:30am! 
2018-03-03 19:57:51	jesse	thats pretty cool. I think I'd rather hang with my family to be honest lol. But that does sound interesting. 
2018-03-03 19:59:44	Sagar	That's great dude. I am looking forward to this, let's see what I gain from it. 
2018-03-09 17:27:34	Sagar	Hey Jesse,
2018-03-09 17:27:34		How's it going? 
2018-03-09 17:28:29	Sagar	How was the meeting yesterday? 
2018-03-09 17:43:22	jesse	Hey Sagar, its going alright. there was no meeting yesterday. how was your trip? 
2018-03-09 18:14:54	Sagar	Cool! There was a meeting to showcase to orphanet people yesterday, I was just wondering what happened in that. It was good man, I got to see the environment in the silicon valley and met some really cool people. Listen to success stories of some NC State alumns and take some inspirational lessons 
2018-03-09 18:15:37	Sagar	What are the requirements now that we have to work on and what have been accomplished so far? 
2018-03-09 18:35:55	jesse	So, this week, I ran into quite a few issues but the important thing is that I made a script to take all of the pubmed stuff and compare the last names and the medical schools. The comparison is just stripping out some common words and checking if there is a direct match. There was a huge issue with using a nested for loop with the data. With as many articles and specialists there are, it would take an estimated 600 days to finish. So I started on a different approach. I 
2018-03-09 18:36:19	jesse	I plan on making separate sql statements for each state and doing comparisons per each state 
2018-03-09 18:36:50	jesse	I did it with NC med schools and got around 642 matches... which is pretty low I think, but we can ngram it later. 
2018-03-09 18:37:12	jesse	My new script takes about 30mins for just NC. 
2018-03-09 18:38:17	jesse	I also modified my scripts to only work with SQL... if we did CSV's, we would run into all the memory issues I had this week. 
2018-03-09 18:39:51	jesse	As for where we need to go, I need the states (2 letters) that each of the 404 med schools within YetAnotherMedSchoolList. I imagine this will take some manual work.
2018-03-09 18:39:51		I will also need to generate the sql statements based on the states and the med schools. 
2018-03-09 18:40:13	jesse	I talked to arun about this as well, but idk if he is trying to do this. 
2018-03-09 18:40:50	jesse	Anyway, I hit 20 hours for the week so I'm gonna stop messaging and working for the night. 
2018-03-09 18:42:39	Sagar	Okay I'll start doing that manual work now 
2018-03-09 18:43:00	jesse	Sweet! 
2018-03-09 18:44:19	Sagar	642 is low number for med school in NC, we have to find some other way around 
2018-03-09 18:44:56	Sagar	I was afraid of nested loop earlier too 
2018-03-09 18:46:47	Sagar	We can work on generating SQL statements. I will not disturb you anymore 
2018-03-09 18:47:09	Sagar	Thanks! 
2018-03-09 18:47:33	jesse	youre fine. if you want, I can push the script so you can take a look. 
2018-03-09 18:48:09	Sagar	Yes sure. Once I'm done with manual work, I'll try that 
2018-03-09 18:48:24	Sagar	Thanks dude 
2018-03-09 18:50:51	jesse	Its already pushed on rarediseases under scripts/pubmed_crawler/getPhysicianPubmedConnection.py 
2018-03-09 18:51:30	jesse	there is also compareMedSchools.py which helps ya test which hospitals are matching and not matching. 
2018-03-09 18:51:36	jesse	also pushed 
2018-03-09 18:51:54	Sagar	Awesome! Thanks 
2018-03-11 19:37:02	Sagar	Hey Jesse, I have uploaded the file named Medschoolswithstate in the drive 
2018-03-11 19:37:40	Sagar	There are only 6 schools whose name was too general and I can't be sure which ones are they 
2018-03-11 21:08:19	jesse	cool! 
2018-03-13 13:55:53	jesse	dont worry about the monstrous code we wrote, we found a much easier way. 
2018-03-13 14:42:06	Sagar	That's cool. What did you do now? 
2018-03-13 17:21:38	jesse	Same concept, we just SQL queried each last name and compared the two groups. We also created indexes so that the query runs MEGA FASTER. 
2018-03-13 17:21:55	jesse	about 5 lines of code compared to our monstrosity 
2018-03-13 19:51:46	Sagar	That is not completely clear to me but sounds similar but using SQL instead of loading whole data that we did 
2018-03-13 19:52:45	jesse	we just said select * from specialists where lastname=[iteratedVariable] 
2018-03-13 19:52:55	jesse	thats how we got the dataframes 
2018-03-13 19:53:45	Sagar	Hmm cool! 
2018-03-13 19:54:16	Sagar	That solves memory issue too 
2018-03-13 19:54:18	Sagar	Nice 
2018-03-13 19:55:11	jesse	of course, we wouldnt have been able to do that above statement without knowledge of indexes in databases.
2018-03-13 19:55:11		making them speeds up the query super fast. 
2018-03-13 19:55:33	jesse	it would have made our code take 150 days without the indexes 
2018-03-13 19:55:45	jesse	with it, only 4.5 hours 
2018-03-13 19:55:56	Sagar	I need to understand that from you. How you handled indexes 
2018-03-13 19:56:06	Sagar	Wow! That's so efficient 
2018-03-13 19:56:56	jesse	in psql, we just created an index of what we were going to query. you can google that but it has no python code. just one line of psql 
2018-03-13 19:57:29	Sagar	Cool, I'll look at it. Thanks! 
2018-03-13 19:57:43	Sagar	What we have to do now? 
2018-03-13 20:03:02	jesse	wait for meaghan to do a thing and then run the program on power6a... with her permission of course.
2018-03-13 20:03:02		in the mean time, we need a smarter comparisons. Michael wants us to compare first names as well as last, which is easy to implement since I already captured those variables. The first name of the pubmed data includes some middle names, so just split the first name on spaces and get the first value.
2018-03-13 20:03:02		^Once that is done,(and you can handle it if youd like.) we also probably need to figure out the ngrams of the medical school names to see if they are the same or not.
2018-03-13 20:03:02		theres also one more place that the data could get smarter, and that refers to MeSH terms. I can talk about that with you later... Michael and I arent quite sure how to approach that one. 
2018-03-13 20:03:45	jesse	I wonder if first names includes some values that are just initials.... 
2018-03-13 20:03:57	jesse	we'll need to check if thats the case 
2018-03-13 20:17:29	Sagar	Is it possible to use your regex magic to separate first names? In pubmed data the first names are very non uniform and they can be just initials of first and middle name or first full name and middle initial or both full...
2018-03-13 20:17:29		I have made a column for abbreviated names of medical schools but I don't think it will be useful. 
2018-03-13 20:17:29		I tried to look into Mesh thing but again for that we need to have a comprehensive Mesh data that Michael was talking about to compare. 
2018-03-13 20:19:35	jesse	first_name.split(' ') returns a list of words separated by spaces. the first element of the list is the first name.
2018-03-13 20:19:35		if len(first_name) == 1:   
2018-03-13 20:19:35		       compare only the first initial. 
2018-03-13 20:20:23	jesse	thats how I would do it... rather than regex.. 
2018-03-13 20:29:56	Sagar	Right, but I meant how would you handle non uniformity 
2018-03-13 20:30:09	Sagar	That's the reason we were just doing last names 
2018-03-13 20:30:20	jesse	could you give me an example of the nonuniformity? 
2018-03-13 20:31:03	Sagar	In pubmed data the first names are very non uniform and they can be just initials of first and middle name or first full name and middle initial or both full... 
2018-03-13 20:31:10	jesse	to my knowledge it is only
2018-03-13 20:31:10		Firstname Middleinitial
2018-03-13 20:31:10		OR
2018-03-13 20:31:10		firstinitial middleinitail 
2018-03-13 20:31:21	jesse	or first name 
2018-03-13 20:31:28	Sagar	Right 
2018-03-13 20:32:30	Sagar	So just taking the first character of first name in both pubmed and specialist and last name should be same. Will that work? 
2018-03-13 20:32:42	Sagar	I think it should, what's your say 
2018-03-13 20:33:02	jesse	if the length is greater than one, we could just compare the whole name couldnt we? 
2018-03-13 20:33:11	Sagar	We did not even have to perform split. 
2018-03-13 20:33:36	Sagar	Right but if it's greater than one it can have middle name as well 
2018-03-13 20:33:48	Sagar	Then we have to do split 
2018-03-13 20:33:58	jesse	whats wrong with doing split? 
2018-03-13 20:34:40	Sagar	Nothing wrong I was just suggesting a simpler way with one less operation 
2018-03-13 20:35:09	jesse	yeah. I think it would be better if we included the full first name if we can. 
2018-03-13 20:35:37	Sagar	Yes true it will be more accurate than just first character 
2018-03-13 20:36:28	jesse	start with the split, then see if the first item has a length greater than 1, and if it does, compare the first item with the specialist first name.. else compare the first letters of each first name. 
2018-03-13 20:37:07	Sagar	Right 
2018-03-13 20:37:53	jesse	are you gonna put in that code? or should i? I'm not looking at this stuff right now. 
2018-03-13 20:38:37	Sagar	I'm doing other thing now but will try to code that late night 
2018-03-13 20:38:46	jesse	ok 
2018-03-13 20:39:01	Sagar	Have you pushed the new code? 
2018-03-13 20:39:13	Sagar	I'll make changes in that only 
2018-03-13 20:39:42	jesse	yeah its pushed 
2018-03-13 20:40:18	Sagar	Cool getphysicianpubmedconnection? 
2018-03-13 20:44:50	jesse	yea 
2018-03-13 20:47:15	Sagar	Cool thanks! 
2018-03-14 10:03:48	jesse	did you add the piece of code? Michael and Meaghan are asking me to run it. 
2018-03-14 10:08:13	jesse	I just wrote it  up. didn't test though 
2018-03-14 14:59:37	Sagar	Did you ran the program? 
2018-03-14 15:00:11	jesse	yeah. i haven't tested it much but it only found 8 connections in 500 last names... 
2018-03-14 15:01:19	Sagar	That's low though 
2018-03-14 15:02:05	jesse	if ya want, you can work on it, and be sure its doing what its supposed to.
2018-03-14 15:02:05		im busy though, so I cant. 
2018-03-14 15:03:18	Sagar	Alright, not sure if I can but will try 
2018-03-14 15:05:04	jesse	i just pushed it. 
2018-03-14 15:23:30	Sagar	Cool 
2018-03-25 19:28:11	Sagar	Hey Jesse, I need your help in running a script on pubmed-jesse vm. Will you please run that? I have pushed it on the repo you can pull it from there 
2018-03-25 19:28:28	jesse	whats it for? 
2018-03-25 19:29:03	Sagar	For Hospitals database 
2018-03-25 19:29:17	Sagar	csv to django 
2018-03-25 19:29:50	Sagar	It's located here: rarediseases/scripts/hospitals/hospital_csv_to_django.py 
2018-03-25 19:30:04	Sagar	And there is a csv file in proxy server 
2018-03-25 19:30:30	Sagar	Hospital_General_Information.csv 
2018-03-25 19:30:49	Sagar	I think I have to send it to you, it will be on my proxy server 
2018-03-25 19:33:02	Sagar	@Sagar uploaded a file: https://ncstateuniversityitng.slack.com/files/U8S9YMBF0/F9V8MP97B/hospital_general_information.csv (Hospital_General_Information.csv) 
2018-03-25 19:33:08	jesse	why not just do this on your own machine? i assume the csv isnt big. 
2018-03-25 19:33:50	Sagar	My machine slows down when I run the project scripts 
2018-03-25 19:34:52	Sagar	I'm also having trouble running it on my vm environment 
2018-03-25 19:35:03	jesse	ok 
2018-03-25 19:35:16	Sagar	Thanks dude! 
2018-03-25 19:46:33	jesse	your script wasn't working so I just imported the data in a way that I know how to. did you want a .sql file? 
2018-03-25 19:49:03	Sagar	I want the same file as you gave for Specialists 
2018-03-25 19:49:15	Sagar	Was it SQL? 
2018-03-25 19:49:31	jesse	probably. could have been csv though 
2018-03-25 19:49:51	Sagar	I had the csv but I was told to convert to Django 
2018-03-25 19:50:05	Sagar	How can you transfer that sql file? 
2018-03-25 19:50:35	Sagar	or how did you do for specialists? I will do same for this and give it to Meaghan 
2018-03-25 19:51:38	jesse	@jesse uploaded a file: https://ncstateuniversityitng.slack.com/files/U8QQFV2GG/F9VUH09TP/hospital.sql (hospital) 
2018-03-25 19:52:37	jesse	django is just a ORM for sql 
2018-03-25 19:53:18	Sagar	Yes true, I meant Django compatible 
2018-03-25 19:53:27	Sagar	Thank You 
2018-03-25 19:55:12	jesse	your welcome [:+1:1] 
2018-04-26 08:59:13		getting channel history...
2018-02-28 21:01:14	jesse	thats basically where I'm at. What dr. kowolenko actually asked for for this week was a few physicians that worked with our links... so I'm trying to just make psql statements that would show us physicians based on the name and medical school displayed in the pubmed data... I'm having trouble with this as well... 
2018-02-28 21:02:53	Sagar	Name is not completely entered in the DB. First name is abbreviated. Is this where you are facing problem? 
2018-02-28 21:03:03	jesse	no 
2018-02-28 21:03:10	jesse	we can do something like : 
2018-02-28 21:03:36	jesse	select * from physicians where last_name='SIMPSON' and first_name like 'J%' 
2018-02-28 21:03:51	jesse	where % is a wild card for the first name. 
2018-02-28 21:04:29	jesse	I'm going through this list of people who published papers in Chapel hill... but they do not seem to be physicians 
2018-02-28 21:05:11	Sagar	Okay got it. 
2018-02-28 21:05:11		They are mostly professor or researchers I guess.  (edited)
2018-02-28 21:08:47	jesse	yeah. guess so... still doesn't help cuz we are supposed to have more than just Michael Knowles 
2018-02-28 21:10:04	jesse	I'm getting some hits now that I fresh imported the data... I think I may have deleted entries. 
2018-02-28 21:10:40	Sagar	Yes I understand... is Michael Knowles is also a researcher just saw 
2018-02-28 21:11:21	Sagar	Distinguished Professor of Medicine 
2018-02-28 21:11:53	jesse	yeah. I think I'm getting some hits now. Is there a way to write python that executes these queries and prints the data somewhere? 
2018-02-28 21:12:33	Sagar	You mean executing psql? 
2018-02-28 21:13:18	Sagar	I think shell can be helpful but I don't think Python can do that in my knowledge 
2018-02-28 21:14:43	jesse	i'd prefer to generate a CSV of results rather than just things I would copy/paste into a terminal for the sake of showing Dr. Kowolenko that these links can be made 
2018-02-28 21:16:07	jesse	i guess that doesn't matter 
2018-02-28 21:22:17	Sagar	Yes right. That can be done later 
2018-02-28 21:24:09	Sagar	https://gis.stackexchange.com/questions/91443/how-to-execute-sql-lines-in-postgresql-using-python
2018-02-28 21:24:09		How to execute sql lines in postgresql using python？
2018-02-28 21:24:09		I use postgresql 8.4 to route a river network, the following is my code typed in pgAdmin and the result is fine, select * from driving_distance ('select gid as id, start_id::int4 as source, end_id:: 
2018-02-28 21:24:27	Sagar	Try this 
2018-02-28 21:29:18	jesse	thanks. I'm not gonna focus on that now. I'm kinda tired. The links definitely seem like they can happen so long as we figure out how to match the medical school names. all of my examples were chapel hill or virginia commonwealth 
2018-02-28 21:33:17	Sagar	Yes but we tried them and the search was treating it as Full Name 
2018-02-28 21:33:53	jesse	im not talkin about pubmed 
2018-02-28 21:34:27	Sagar	Oh okay 
2018-02-28 21:37:25	jesse	i gotcha. I wouldn't worry too much about anything tonight. i think we got everything we need for the week. 
2018-02-28 21:46:13	Sagar	Okay cool 
2018-02-28 21:46:27	Sagar	Good Night Dude :slightly_smiling_face: 
2018-02-28 21:58:05	jesse	good night 
2018-03-02 18:31:38	Sagar	Hey Jesse, you have given a decent amount of time so what would you like me to help you with? 
2018-03-02 18:47:24	jesse	yep. so the biggest thing is that we need some list of schools and universities to compare the two data sets. Either that, or if you have some function that could compare the names of the medical schools of pubmed to the medical schools on the physician data. Arun may have started workin on this but I havent gotten any word back from him 
2018-03-02 18:53:15	Sagar	Okay so what format are the names of medical schools of pubmed and physician data is? Is it csv? 
2018-03-02 18:53:41	Sagar	And what do you want from comparison? 
2018-03-02 18:54:40	jesse	I'll upload some stuff to the google drive. hold on. 
2018-03-02 18:54:56	Sagar	Okay 
2018-03-02 18:56:35	jesse	These files may be too big for google drive 
2018-03-02 18:58:10	jesse	2.5 gigabytes for just A-E.... I don't understand why the pubmed data is so big this time though though... 
2018-03-02 18:59:24	jesse	oh right.. I took out the NC filter 
2018-03-02 19:05:18	jesse	I'm in the process of uploading some of the pubmed data to google drive. It is certainly not all of it. I also pushed up what I did with the universities. 
2018-03-02 19:06:17	jesse	dont expect that to be representative of the whole data A-E. 
2018-03-02 19:07:27	jesse	but you can use it to help you. I also left up the pubmed data thats only NC 
2018-03-02 19:07:40	jesse	The authors are in a new table now btw 
2018-03-02 19:08:54	jesse	CSV i mean 
2018-03-02 19:15:06	Sagar	Can you please also upload the Physician data 
2018-03-02 19:15:59	Sagar	Let me try to compare the names of school of physicians and pub med 
2018-03-02 19:15:59	jesse	https://data.medicare.gov/Physician-Compare/Physician-Compare-National-Downloadable-File/mj5m-pzi6
2018-03-02 19:15:59		Physician Compare National Downloadable File | Data.Medicare.gov
2018-03-02 19:15:59		Physician Compare National Downloadable File - The Physician Compare National Downloadable File is organized at the individual eligible professional level; each line is unique at the professional/enrollment record/Group Practice/address level. Professionals with multiple Medicare enrollment records and/or single enrollments linking to multiple practice location addresses are listed on multiple lines. 
2018-03-02 19:16:11	Sagar	And which pub med data should I use 
2018-03-02 19:16:47	jesse	you can download it there. I dont want to upload it since I only have so much google drive space. 
2018-03-02 19:17:34	Sagar	Yes I got it :+1: 
2018-03-02 19:17:52	Sagar	Do you want me to download it with NC filter? 
2018-03-02 19:18:10	jesse	nope 
2018-03-02 19:18:19	Sagar	Okay 
2018-03-02 19:18:26	Sagar	And what about pub med 
2018-03-02 19:18:39	Sagar	Which data should I use to compare? 
2018-03-02 19:20:55	jesse	we dont have all of the data yet. we just need to compare the medical schools from pubmed that we have. it shouldnt matter which set you use. I recommend the one that says authors in the file name. thats gonna be the file type that Ill eventually hand over to you or someone else... 
2018-03-02 19:21:41	jesse	and these files are huge. I didnt upload the whole thing. 
2018-03-02 20:23:53	Sagar	Dude every time I am trying to run the script to compare medical schools in pub med and physician data my laptop hangs up 
2018-03-02 20:24:13	Sagar	I realized the physician data file is 760MB 
2018-03-02 20:27:34	jesse	yeah. these are monsters of files 
2018-03-02 20:28:02	jesse	but imagine how much better it would be than just nc. 
2018-03-02 20:29:41	jesse	Meaghan got me a VM that I'm running a script on. you could try asking her for one.
2018-03-02 20:29:41		but also keep efficiency in mind when writing your script. 
2018-03-02 20:32:45	Sagar	Yeah I was breaking my loop for 10000 entries even then it hasn't processed yet. The files are so big that just reading/processing them is taking the whole time 
2018-03-02 20:37:44	jesse	youll have to share the program with me. Ill see what I can do tomorrow or something. 
2018-03-02 20:38:09	Sagar	You said 'so the biggest thing is that we need some list of schools and universities to compare the two data sets', did you mean school names list or after comparison 
2018-03-02 20:38:13	Sagar	Yes sure 
2018-03-02 20:43:26	Sagar	@Sagar uploaded a file: https://ncstateuniversityitng.slack.com/files/U8S9YMBF0/F9JRANBB8/med_school_comparison.py (Med_School_Comparison.py) 
2018-03-02 20:44:00	Sagar	Thanks 
2018-03-02 21:36:09	jesse	i hope you understand that checking if the substring is in the pubmed affiliations is not enough. You are going to get very few hits since the university data is not uniform. N-Gram analysis is one way to try to accomplish this goal. But that is where the problem of efficiency arises. 
2018-03-02 21:36:09		Ideally, we need a list of searchable terms that are unique to each university/medical school. Imagine being able to search the affiliations for 'Chapel Hill' and then searching for all of the physicians whose med school was 'Chapel Hill'. That would be easier than trying every combination of 'University of North Carolina at Chapel Hill School of Medicine' and comparing that to the combinations of other data in the physicians table.
2018-03-02 21:36:09		lets call the N-Gram Method, Method 1.
2018-03-02 21:36:09		and lets call the unique search term method, Method 2.
2018-03-02 21:36:09		If we go with Method 1, and got that working, we could match the entirety of the pubmed data with every university in the united states... so long as the med school field of the physicians includes the universities (i'm looking into this now)
2018-03-02 21:36:09		Now for method 2. With method 2, we need to manually figure out which terms to search to match each individual school. (which is reasonable for the 150 Official medical schools. but not for 990 entries ) and I already kinda did something like that. We would probably get fewer hits, but seems much more feasible. 
2018-03-02 21:39:53	jesse	your script is a good starter file though. 
2018-03-02 22:31:25	jesse	I took a lil bit of time to compile "YetAnotherListOfMedSchools" in the drive. this is the list of med schools obtained through filtering out duplicates in the physician data. there are around 440 entries.... which is greater than the 150 and less than the 990 of the other lists. 
2018-03-02 22:31:25		im goin to bed. gnight dude 
2018-03-03 16:20:19	Sagar	I didn't thought about the ngram stuff. You are right. I was trying to figure out if there is a better way but I don't think so 
2018-03-03 16:20:39	Sagar	I was making the names shorter in the yet another list file 
2018-03-03 16:20:55	Sagar	But do you think it's a good idea to go with that 
2018-03-03 16:21:28	Sagar	Because there are names that are left with nothing in the end 
2018-03-03 17:33:48	Sagar	I have made another column in that yet another file 'ABB_NAME' containing abbreviated version of names 
2018-03-03 17:34:32	Sagar	I don't know how it will be helpful 
2018-03-03 19:25:59	jesse	we need the list of medical schools for the pubmed articles so we can compare manually to see if there are any patterns. 
2018-03-03 19:46:59	Sagar	What I have created is of any help? 
2018-03-03 19:47:53	Sagar	One thing dude, I won't be able to work now until Thursday as I am going Silicon Valley for the break! 
2018-03-03 19:48:20	jesse	neat!! what are ya going there for? 
2018-03-03 19:51:05	jesse	And I haven't looked at the abbreviations you made yet. I'm currently looking at generating the list of pubmed med schools 
2018-03-03 19:54:51	Sagar	I am going with the University. The Entrepreneurship at NC State selects 14 students every year for that. We will be having trips to companies and learn more about the tech and business 
2018-03-03 19:56:08	Sagar	Okay I am dealing with packing and stuff now lol. I have to reach airport by 4:30am! 
2018-03-03 19:57:51	jesse	thats pretty cool. I think I'd rather hang with my family to be honest lol. But that does sound interesting. 
2018-03-03 19:59:44	Sagar	That's great dude. I am looking forward to this, let's see what I gain from it. 
2018-03-09 17:27:34	Sagar	Hey Jesse,
2018-03-09 17:27:34		How's it going? 
2018-03-09 17:28:29	Sagar	How was the meeting yesterday? 
2018-03-09 17:43:22	jesse	Hey Sagar, its going alright. there was no meeting yesterday. how was your trip? 
2018-03-09 18:14:54	Sagar	Cool! There was a meeting to showcase to orphanet people yesterday, I was just wondering what happened in that. It was good man, I got to see the environment in the silicon valley and met some really cool people. Listen to success stories of some NC State alumns and take some inspirational lessons 
2018-03-09 18:15:37	Sagar	What are the requirements now that we have to work on and what have been accomplished so far? 
2018-03-09 18:35:55	jesse	So, this week, I ran into quite a few issues but the important thing is that I made a script to take all of the pubmed stuff and compare the last names and the medical schools. The comparison is just stripping out some common words and checking if there is a direct match. There was a huge issue with using a nested for loop with the data. With as many articles and specialists there are, it would take an estimated 600 days to finish. So I started on a different approach. I 
2018-03-09 18:36:19	jesse	I plan on making separate sql statements for each state and doing comparisons per each state 
2018-03-09 18:36:50	jesse	I did it with NC med schools and got around 642 matches... which is pretty low I think, but we can ngram it later. 
2018-03-09 18:37:12	jesse	My new script takes about 30mins for just NC. 
2018-03-09 18:38:17	jesse	I also modified my scripts to only work with SQL... if we did CSV's, we would run into all the memory issues I had this week. 
2018-03-09 18:39:51	jesse	As for where we need to go, I need the states (2 letters) that each of the 404 med schools within YetAnotherMedSchoolList. I imagine this will take some manual work.
2018-03-09 18:39:51		I will also need to generate the sql statements based on the states and the med schools. 
2018-03-09 18:40:13	jesse	I talked to arun about this as well, but idk if he is trying to do this. 
2018-03-09 18:40:50	jesse	Anyway, I hit 20 hours for the week so I'm gonna stop messaging and working for the night. 
2018-03-09 18:42:39	Sagar	Okay I'll start doing that manual work now 
2018-03-09 18:43:00	jesse	Sweet! 
2018-03-09 18:44:19	Sagar	642 is low number for med school in NC, we have to find some other way around 
2018-03-09 18:44:56	Sagar	I was afraid of nested loop earlier too 
2018-03-09 18:46:47	Sagar	We can work on generating SQL statements. I will not disturb you anymore 
2018-03-09 18:47:09	Sagar	Thanks! 
2018-03-09 18:47:33	jesse	youre fine. if you want, I can push the script so you can take a look. 
2018-03-09 18:48:09	Sagar	Yes sure. Once I'm done with manual work, I'll try that 
2018-03-09 18:48:24	Sagar	Thanks dude 
2018-03-09 18:50:51	jesse	Its already pushed on rarediseases under scripts/pubmed_crawler/getPhysicianPubmedConnection.py 
2018-03-09 18:51:30	jesse	there is also compareMedSchools.py which helps ya test which hospitals are matching and not matching. 
2018-03-09 18:51:36	jesse	also pushed 
2018-03-09 18:51:54	Sagar	Awesome! Thanks 
2018-03-11 19:37:02	Sagar	Hey Jesse, I have uploaded the file named Medschoolswithstate in the drive 
2018-03-11 19:37:40	Sagar	There are only 6 schools whose name was too general and I can't be sure which ones are they 
2018-03-11 21:08:19	jesse	cool! 
2018-03-13 13:55:53	jesse	dont worry about the monstrous code we wrote, we found a much easier way. 
2018-03-13 14:42:06	Sagar	That's cool. What did you do now? 
2018-03-13 17:21:38	jesse	Same concept, we just SQL queried each last name and compared the two groups. We also created indexes so that the query runs MEGA FASTER. 
2018-03-13 17:21:55	jesse	about 5 lines of code compared to our monstrosity 
2018-03-13 19:51:46	Sagar	That is not completely clear to me but sounds similar but using SQL instead of loading whole data that we did 
2018-03-13 19:52:45	jesse	we just said select * from specialists where lastname=[iteratedVariable] 
2018-03-13 19:52:55	jesse	thats how we got the dataframes 
2018-03-13 19:53:45	Sagar	Hmm cool! 
2018-03-13 19:54:16	Sagar	That solves memory issue too 
2018-03-13 19:54:18	Sagar	Nice 
2018-03-13 19:55:11	jesse	of course, we wouldnt have been able to do that above statement without knowledge of indexes in databases.
2018-03-13 19:55:11		making them speeds up the query super fast. 
2018-03-13 19:55:33	jesse	it would have made our code take 150 days without the indexes 
2018-03-13 19:55:45	jesse	with it, only 4.5 hours 
2018-03-13 19:55:56	Sagar	I need to understand that from you. How you handled indexes 
2018-03-13 19:56:06	Sagar	Wow! That's so efficient 
2018-03-13 19:56:56	jesse	in psql, we just created an index of what we were going to query. you can google that but it has no python code. just one line of psql 
2018-03-13 19:57:29	Sagar	Cool, I'll look at it. Thanks! 
2018-03-13 19:57:43	Sagar	What we have to do now? 
2018-03-13 20:03:02	jesse	wait for meaghan to do a thing and then run the program on power6a... with her permission of course.
2018-03-13 20:03:02		in the mean time, we need a smarter comparisons. Michael wants us to compare first names as well as last, which is easy to implement since I already captured those variables. The first name of the pubmed data includes some middle names, so just split the first name on spaces and get the first value.
2018-03-13 20:03:02		^Once that is done,(and you can handle it if youd like.) we also probably need to figure out the ngrams of the medical school names to see if they are the same or not.
2018-03-13 20:03:02		theres also one more place that the data could get smarter, and that refers to MeSH terms. I can talk about that with you later... Michael and I arent quite sure how to approach that one. 
2018-03-13 20:03:45	jesse	I wonder if first names includes some values that are just initials.... 
2018-03-13 20:03:57	jesse	we'll need to check if thats the case 
2018-03-13 20:17:29	Sagar	Is it possible to use your regex magic to separate first names? In pubmed data the first names are very non uniform and they can be just initials of first and middle name or first full name and middle initial or both full...
2018-03-13 20:17:29		I have made a column for abbreviated names of medical schools but I don't think it will be useful. 
2018-03-13 20:17:29		I tried to look into Mesh thing but again for that we need to have a comprehensive Mesh data that Michael was talking about to compare. 
2018-03-13 20:19:35	jesse	first_name.split(' ') returns a list of words separated by spaces. the first element of the list is the first name.
2018-03-13 20:19:35		if len(first_name) == 1:   
2018-03-13 20:19:35		       compare only the first initial. 
2018-03-13 20:20:23	jesse	thats how I would do it... rather than regex.. 
2018-03-13 20:29:56	Sagar	Right, but I meant how would you handle non uniformity 
2018-03-13 20:30:09	Sagar	That's the reason we were just doing last names 
2018-03-13 20:30:20	jesse	could you give me an example of the nonuniformity? 
2018-03-13 20:31:03	Sagar	In pubmed data the first names are very non uniform and they can be just initials of first and middle name or first full name and middle initial or both full... 
2018-03-13 20:31:10	jesse	to my knowledge it is only
2018-03-13 20:31:10		Firstname Middleinitial
2018-03-13 20:31:10		OR
2018-03-13 20:31:10		firstinitial middleinitail 
2018-03-13 20:31:21	jesse	or first name 
2018-03-13 20:31:28	Sagar	Right 
2018-03-13 20:32:30	Sagar	So just taking the first character of first name in both pubmed and specialist and last name should be same. Will that work? 
2018-03-13 20:32:42	Sagar	I think it should, what's your say 
2018-03-13 20:33:02	jesse	if the length is greater than one, we could just compare the whole name couldnt we? 
2018-03-13 20:33:11	Sagar	We did not even have to perform split. 
2018-03-13 20:33:36	Sagar	Right but if it's greater than one it can have middle name as well 
2018-03-13 20:33:48	Sagar	Then we have to do split 
2018-03-13 20:33:58	jesse	whats wrong with doing split? 
2018-03-13 20:34:40	Sagar	Nothing wrong I was just suggesting a simpler way with one less operation 
2018-03-13 20:35:09	jesse	yeah. I think it would be better if we included the full first name if we can. 
2018-03-13 20:35:37	Sagar	Yes true it will be more accurate than just first character 
2018-03-13 20:36:28	jesse	start with the split, then see if the first item has a length greater than 1, and if it does, compare the first item with the specialist first name.. else compare the first letters of each first name. 
2018-03-13 20:37:07	Sagar	Right 
2018-03-13 20:37:53	jesse	are you gonna put in that code? or should i? I'm not looking at this stuff right now. 
2018-03-13 20:38:37	Sagar	I'm doing other thing now but will try to code that late night 
2018-03-13 20:38:46	jesse	ok 
2018-03-13 20:39:01	Sagar	Have you pushed the new code? 
2018-03-13 20:39:13	Sagar	I'll make changes in that only 
2018-03-13 20:39:42	jesse	yeah its pushed 
2018-03-13 20:40:18	Sagar	Cool getphysicianpubmedconnection? 
2018-03-13 20:44:50	jesse	yea 
2018-03-13 20:47:15	Sagar	Cool thanks! 
2018-03-14 10:03:48	jesse	did you add the piece of code? Michael and Meaghan are asking me to run it. 
2018-03-14 10:08:13	jesse	I just wrote it  up. didn't test though 
2018-03-14 14:59:37	Sagar	Did you ran the program? 
2018-03-14 15:00:11	jesse	yeah. i haven't tested it much but it only found 8 connections in 500 last names... 
2018-03-14 15:01:19	Sagar	That's low though 
2018-03-14 15:02:05	jesse	if ya want, you can work on it, and be sure its doing what its supposed to.
2018-03-14 15:02:05		im busy though, so I cant. 
2018-03-14 15:03:18	Sagar	Alright, not sure if I can but will try 
2018-03-14 15:05:04	jesse	i just pushed it. 
2018-03-14 15:23:30	Sagar	Cool 
2018-03-25 19:28:11	Sagar	Hey Jesse, I need your help in running a script on pubmed-jesse vm. Will you please run that? I have pushed it on the repo you can pull it from there 
2018-03-25 19:28:28	jesse	whats it for? 
2018-03-25 19:29:03	Sagar	For Hospitals database 
2018-03-25 19:29:17	Sagar	csv to django 
2018-03-25 19:29:50	Sagar	It's located here: rarediseases/scripts/hospitals/hospital_csv_to_django.py 
2018-03-25 19:30:04	Sagar	And there is a csv file in proxy server 
2018-03-25 19:30:30	Sagar	Hospital_General_Information.csv 
2018-03-25 19:30:49	Sagar	I think I have to send it to you, it will be on my proxy server 
2018-03-25 19:33:02	Sagar	@Sagar uploaded a file: https://ncstateuniversityitng.slack.com/files/U8S9YMBF0/F9V8MP97B/hospital_general_information.csv (Hospital_General_Information.csv) 
2018-03-25 19:33:08	jesse	why not just do this on your own machine? i assume the csv isnt big. 
2018-03-25 19:33:50	Sagar	My machine slows down when I run the project scripts 
2018-03-25 19:34:52	Sagar	I'm also having trouble running it on my vm environment 
2018-03-25 19:35:03	jesse	ok 
2018-03-25 19:35:16	Sagar	Thanks dude! 
2018-03-25 19:46:33	jesse	your script wasn't working so I just imported the data in a way that I know how to. did you want a .sql file? 
2018-03-25 19:49:03	Sagar	I want the same file as you gave for Specialists 
2018-03-25 19:49:15	Sagar	Was it SQL? 
2018-03-25 19:49:31	jesse	probably. could have been csv though 
2018-03-25 19:49:51	Sagar	I had the csv but I was told to convert to Django 
2018-03-25 19:50:05	Sagar	How can you transfer that sql file? 
2018-03-25 19:50:35	Sagar	or how did you do for specialists? I will do same for this and give it to Meaghan 
2018-03-25 19:51:38	jesse	@jesse uploaded a file: https://ncstateuniversityitng.slack.com/files/U8QQFV2GG/F9VUH09TP/hospital.sql (hospital) 
2018-03-25 19:52:37	jesse	django is just a ORM for sql 
2018-03-25 19:53:18	Sagar	Yes true, I meant Django compatible 
2018-03-25 19:53:27	Sagar	Thank You 
2018-03-25 19:55:12	jesse	your welcome [:+1:1] 
